import{a as Ht,b as _t,g as Ut,r as h,u as $e,c as Fe,L as Ke,d as rt,R as De,B as Vt,e as Jt,f as Ae}from"./vendor-CShR46tw.js";import{C as qt,a as Gt,L as Qt,P as Kt,b as Yt,p as Xt,c as Zt,d as en,e as tn}from"./charts-BpFZ48b5.js";import{a as nn,v as _e}from"./utils-BjhivJ9o.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Ze={exports:{}},ze={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ct;function rn(){if(ct)return ze;ct=1;var t=Ht(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function p(l,c,x){var d,u={},y=null,T=null;x!==void 0&&(y=""+x),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(T=c.ref);for(d in c)i.call(c,d)&&!s.hasOwnProperty(d)&&(u[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)u[d]===void 0&&(u[d]=c[d]);return{$$typeof:n,type:l,key:y,ref:T,props:u,_owner:a.current}}return ze.Fragment=r,ze.jsx=p,ze.jsxs=p,ze}var dt;function on(){return dt||(dt=1,Ze.exports=rn()),Ze.exports}var e=on(),Le={},pt;function an(){if(pt)return Le;pt=1;var t=_t();return Le.createRoot=t.createRoot,Le.hydrateRoot=t.hydrateRoot,Le}var sn=an();const ln=Ut(sn);function cn(t,n){console.log("üîç getAverageReturn called with timeframe:",n,"snapshots:",t.length);const r=new Date,i=24*60*60*1e3;switch(n){case"D":new Date(r.getFullYear(),r.getMonth(),r.getDate());break;case"W":new Date(r.getTime()-7*i);break;case"M":new Date(r.getTime()-30*i);break;case"Y":new Date(r.getTime()-365*i);break;case"YTD":new Date(r.getFullYear(),0,1);break}let a=0,s=0;for(const l of t){const c=l.symbol||"?",x=l.historicalData,d=l.buyDate,u=l.buyPrice;if(console.log(`[Header Loop] Processing ${c}: historicalData length: ${x?.length||0}, buyDate: ${d}, buyPrice: ${u}`),!Array.isArray(x))continue;const y=d&&new Date(d).toString()!=="Invalid Date"?d:null,{startPoint:T,endPoint:I}=it(x,n,y,c,u);if(console.log(`[Header Debug] ${c}: startPoint:`,T,"endPoint:",I),T&&I&&typeof T.price=="number"&&typeof I.price=="number"&&T.price>0){const $=(I.price-T.price)/T.price*100;console.log(`[Header %] ${c}:`),console.log("Start Point (header):",T),console.log("End Point (header):",I),console.log("Calculated Return (header):",$),console.log("Running total:",a,"count:",s),a+=$,s++}}const p=s>0?a/s:0;return console.log(`[Header Final] Total: ${a}, Count: ${s}, Average: ${p}%`),p}function it(t,n,r,i="?",a=null){if(!Array.isArray(t)||t.length===0)return{startPoint:null,endPoint:null};const s=new Date,p={D:"D",W:"WEEK",M:"MONTH",Y:"YEAR",YTD:"YTD",MAX:"MAX"}[n]||n;let l;switch(p){case"D":l=new Date(s.getFullYear(),s.getMonth(),s.getDate());break;case"WEEK":l=new Date(s.getTime()-7*24*60*60*1e3);break;case"MONTH":l=new Date(s.getTime()-31*24*60*60*1e3);break;case"YEAR":l=new Date(s.getTime()-365*24*60*60*1e3);break;case"YTD":l=new Date(s.getFullYear(),0,1);break;case"MAX":default:l=null}const c=new Date(r||t[0]?.timestamp||s);l&&l.getTime()>c.getTime();function x($,f){let v=0,F=$.length-1,H=0,Y=Math.abs(new Date($[0].timestamp)-f);for(;v<=F;){const P=Math.floor((v+F)/2),K=new Date($[P].timestamp).getTime(),b=Math.abs(K-f);if(b<Y&&(Y=b,H=P),K<f)v=P+1;else if(K>f)F=P-1;else return P}return H}let d=null,u=null,y,T;if(n==="MAX")y=c,T=a&&!isNaN(a)?Number(a):t[0]?.price||0;else{const $=l||s;if(y=new Date(Math.max(c.getTime(),$.getTime())),y.getTime()===c.getTime())T=a&&!isNaN(a)?Number(a):t[0]?.price||0;else{const f=x(t,y.getTime());T=t[f]?.price||0}}const I=x(t,y.getTime());return d={...t[I],timestamp:y.toISOString(),price:T},u=t[t.length-1],console.log(`‚úÖ Return calculation for ${i} (${n}):`),n==="MAX"?console.log(`‚úÖ Start: Buy date ${c.toISOString()} ‚Üí Buy Price: ${d.price}`):(console.log(`‚úÖ Buy date: ${c.toISOString()}`),console.log(`‚úÖ Timeframe start: ${l?.toISOString()||"now"}`),console.log(`‚úÖ Effective start: ${y.toISOString()} ‚Üí Price: ${d.price}`)),console.log(`‚úÖ End: ${u?.timestamp} ‚Üí Price: ${u?.price}`),d&&u&&d.price&&u.price&&console.log(`‚úÖ Return: ${((u.price-d.price)/d.price*100).toFixed(2)}%`),d?u?(console.log(`Filtered ${t.length} ‚Üí start = ${d?.price} @ ${d?.timestamp}, end = ${u?.price} @ ${u?.timestamp}, buyDate = ${c.toISOString()}`),{startPoint:d,endPoint:u}):(console.warn(`‚õî No valid endPoint found for ${i}`),{startPoint:null,endPoint:null}):(console.warn(`‚õî No valid startPoint found for ${i}`),{startPoint:null,endPoint:null})}const kt=h.createContext(),ut="rgb(140,185,162)",dn="#8CB9A2",gt="#e31507",et="#000",pn="#000000";function un(t,n){if(!n)return t;const r=t.trim().toLowerCase();return r===et||r===pn||r==="black"||r.startsWith("rgb(0,0,0)")?ut:r===ut||r===dn||r.startsWith("rgb(140,185,162)")?et:r===gt?gt:et}function gn({children:t}){const[n,r]=h.useState(!1),i=()=>r(a=>!a);return e.jsx(kt.Provider,{value:{isInverted:n,toggleTheme:i},children:t})}function Ne(){return h.useContext(kt)}function J(t){const{isInverted:n}=Ne();return un(t,n)}qt.register(Gt,Qt,Kt,Yt,Xt,Zt,en);const hn="rgb(140,185,162)",ot=({portfolioReturnData:t,height:n=300,showTooltip:r=!0,mini:i=!1,suppressEmptyMessage:a=!1})=>{const s=J(hn),p=J("black");J("#888");const l=h.useMemo(()=>{if(!Array.isArray(t)||t.length===0)return[];const P=t.map(B=>{if(!B||!Array.isArray(B.historicalData)||B.historicalData.length===0)return null;const{historicalData:X,buyDate:D,buyPrice:S,symbol:z,timeframe:k}=B,E=D&&new Date(D).toString()!=="Invalid Date"?D:null,{startPoint:G,endPoint:te}=it(X,k,E,z,S);if(!G||!te)return null;const re=new Date(G.timestamp).getTime(),se=new Date(te.timestamp).getTime();let ie=X.filter(ye=>{const U=new Date(ye.timestamp).getTime();return U>=re&&U<=se}).map(ye=>({...ye,timestampValue:new Date(ye.timestamp).getTime()}));return ie.length>0&&ie[0].timestampValue>re&&ie.unshift({...ie[0],timestamp:new Date(re).toISOString(),timestampValue:re,price:ie[0].price}),ie.length>0&&ie[ie.length-1].timestampValue<se&&ie.push({...ie[ie.length-1],timestamp:new Date(se).toISOString(),timestampValue:se,price:ie[ie.length-1].price}),{symbol:z,points:ie,timeframe:k,buyDate:D,buyPrice:S,startPoint:G}}).filter(Boolean);if(P.length===0)return[];const K=Array.from(new Set(P.flatMap(B=>B.points.map(X=>X.timestampValue)))).sort((B,X)=>B-X);if(K.length===0)return[];const b=i?5:30,V=K.length<=b?1:Math.floor(K.length/b),W=K.filter((B,X)=>X%V===0);W[W.length-1]!==K[K.length-1]&&W.push(K[K.length-1]);const M=W.map((B,X)=>{const D=P.map(z=>{const k=z.points.findIndex(re=>re.timestampValue>=B),E=k===-1?z.points[z.points.length-1]:z.points[k],G=z.startPoint;if(!G||!E||G.price===0)return 0;const te=(E.price-G.price)/G.price*100;return Number.isFinite(te)?te:0}),S=D.length?D.reduce((z,k)=>z+k,0)/D.length:0;return{timestampValue:B,returnPercent:Number.isFinite(S)?S:0,xIndex:X}});return console.log("Chart data points:",M),M},[t,i,JSON.stringify(t.map(P=>({symbol:P.symbol,buyPrice:P.buyPrice,buyDate:P.buyDate,timeframe:P.timeframe})))]);if(!l||l.length===0)return a?null:e.jsx("div",{style:{textAlign:"center",padding:40,color:s,fontFamily:"'Courier New'",background:p},children:"No valid data to display yet."});const c=l.map((P,K)=>K),x=l.map(P=>P.returnPercent),d=l.map(P=>Number.isFinite(P.returnPercent)?P.returnPercent:0),u=Math.min(...d),y=Math.max(...d),T=y-u,f=Math.max(T*.05,1);let v=u-f,F=y+f;v===F&&(v-=1,F+=1);const H={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:r&&!i,mode:"index",intersect:!1,backgroundColor:p,titleColor:s,bodyColor:s,borderColor:s,borderWidth:1,titleFont:{family:"Courier New",size:12},bodyFont:{family:"Courier New",size:11},callbacks:{label:function(P){return`Return: ${P.parsed.y.toFixed(2)}%`}}}},scales:{x:{display:!i,grid:{display:!1},ticks:{display:!1},border:{display:!0,color:s,width:2}},y:{display:!i,grid:{display:!1},ticks:{display:!1},border:{display:!0,color:s,width:2},min:v,max:F}},elements:{point:{radius:i?0:3,hoverRadius:i?0:5,backgroundColor:s,borderColor:p,borderWidth:1},line:{borderColor:s,borderWidth:2,tension:.1}},interaction:{intersect:!1,mode:"index"}},Y={labels:c,datasets:[{label:"Portfolio Return",data:x,borderColor:s,backgroundColor:s,fill:!1,tension:.1}]};return e.jsx("div",{style:{width:"100%",height:n,backgroundColor:"transparent",fontFamily:"Courier New",overflow:"hidden"},children:e.jsx(tn,{data:Y,options:H})})},ht=["Today‚Äôs Edge","Quiet Capital","Simple Gains","Still Waters ETF","Monochrome Alpha","Code Zen","Tokyo Drift Fund","6AM Markets","Silent Buy-In","Whisper Equity","Margins & Moonlight","Espresso Exposure","The Black Candle","No Noise Holdings","White Line Risk","Bare NAV","Precision & Profit","N≈çnai Investment","Folded Capital","Ink Thin Margin","ETF Me Later","Bull Sheet","Bagholders Anonymous","Pump & Zen","2% Club","Fade the Fed","Just the Tip‚Ä¶ of the Chart","Buy High, Cry Later","Margin of Safety? Never Heard of Her","Quant & Furious","Diamond Hands Club","Degen Lite","Buffett‚Äôs Burner Wallet","Icarus Capital","Stoploss Therapy","Roaring Zen","YoloZen ETF","Theta Is My Safe Word","Long and Wrong","The Drawdown Diaries","Kintsugi Holdings","Ky≈ç Balance","Tanaka Trades","Nami (Wave) Fund","Kanjo Capital","Tora Volatility","Ky≈´ Capital","Nikkei Nights","Sumi Ink Index","Origami Alpha","404: Ticker Not Found","async(portfolio)","Fetching Gains‚Ä¶","The JSON Fund","SimuLedger","Web3Bois","Ctrl+Alt+Rebalance","LoFi Alpha","API or Die","Console.Log(Rich)","Fade","Wick","Drift","Latch","Fold","Snap","Bite","Risk","Ping","ZenVest","Dead Cat ETF","Rangebound AF","Opex Overload","Smart Beta Beta","Macro Micro Fund","CPI Szn","Taper Tears","FOMO Fund","Gensler‚Äôs Sandbox","Gamma Goblins","The Contrarian","The Ghost Trader","The Quiet Bull","The Daily Monk","The Candle Whisperer","The Macro Stoic","The Alpha Hermit","The Tape Reader","The Vol Addict","The Hedge Poet","Buy Buy Baby","NAVy Seals","Beta Males","Quants of Solitude","Emotional Damage Holdings","Mo‚Äô Money, No Backend","Risk Management-ish","All Weather-ish","Zero Day Holds","Return of the MACD"];function Ue({numTickers:t=4,days:n=130,pointsPerDay:r=25,startPrice:i=100,volatility:a=8,name:s="Fixed Mock Watchlist",startDate:p=null}={}){const c=Math.floor(864e5/r),x=Date.now(),d=n*r,u=x-(d-1)*c;function y(I){let $=i+Math.random()*10;const f=[];for(let v=0;v<d;v++){const F=u+v*c,H=(Math.random()-.5)*a;$=Math.max(1,$+H),f.push({price:Number($.toFixed(2)),timestamp:F})}return{symbol:I,buyDate:f[0].timestamp,buyPrice:f[0].price,historicalData:f}}const T=Array.from({length:t},(I,$)=>y(`MOCK${$+1}`));return{id:`mock-${Date.now()}`,name:s,items:T,createdAt:u,updatedAt:x}}const xn="https://burnlist-api.onrender.com/api";async function at(t){try{t=t.toUpperCase();const n=`${xn}/finviz-quote?ticker=${t}&timeframe=d`;console.log(`üåê Requesting Finviz quote for symbol: ${t}`);const i=(await nn.get(n)).data;if(console.log(`üì• Raw Finviz data for ${t}:`,i),console.log(`üìä Data length: ${i.length} records`),i.length>0&&(console.log("üìä First record:",i[0]),console.log("üìä Last record:",i[i.length-1])),!i||!Array.isArray(i)||i.length===0)return console.warn(`‚ùó No data received for ${t}:`,i),null;const a=i.map(l=>{const c=l.Date||l.date,x=parseFloat(l.Close||l.close||l.Price||l.price);return!c||isNaN(x)||x<=0?(console.warn(`‚ö†Ô∏è Invalid data point for ${t}:`,l),null):{price:x,timestamp:new Date(c).toISOString()}}).filter(l=>l!==null);if(a.length===0)return console.warn(`‚ö†Ô∏è No valid historical data for ${t}`),null;const s=a[a.length-1].price,p=a[a.length-1].timestamp;return console.log(`üì° fetchQuote ‚Üí ${t}: $${s} @ ${p} (${a.length} data points)`),{symbol:t,buyPrice:s,buyDate:p,historicalData:a}}catch(n){return console.error(`‚ùå fetchQuote error for ${t}:`,n),null}}const mn=Object.freeze(Object.defineProperty({__proto__:null,fetchQuote:at},Symbol.toStringTag,{value:"Module"}));function Ve(t){if(!t||typeof t!="object")return console.warn("‚ö†Ô∏è normalizeTicker received invalid input:",t),{symbol:"UNKNOWN",buyPrice:0,buyDate:new Date().toISOString(),historicalData:[],addedAt:new Date().toISOString(),type:"real",isMock:!1};let n=!1;const r=Array.isArray(t.historicalData)?t.historicalData.map(l=>{const c=Number(l?.price),x=new Date(l?.timestamp).toISOString();return(isNaN(c)||!l?.timestamp)&&console.warn("‚ö†Ô∏è Malformed historical entry:",l),c===0&&(console.warn("‚ö†Ô∏è Historical entry has price = 0:",l),n=!0),{price:isNaN(c)?0:c,timestamp:x}}):[];let i=Number(t.buyPrice);isNaN(i)&&(console.warn("‚ö†Ô∏è Invalid or missing buyPrice, defaulting to 0:",t),i=0,n=!0);let a;t.buyDate&&!isNaN(new Date(t.buyDate))?a=new Date(t.buyDate).toISOString():(a=new Date(t.addedAt||Date.now()).toISOString(),console.warn("‚ö†Ô∏è Invalid or missing buyDate, falling back to addedAt or now:",t));const s=new Date(t.addedAt||Date.now()).toISOString(),p={symbol:String(t.symbol||"UNKNOWN").toUpperCase(),buyPrice:i,buyDate:a,historicalData:r,addedAt:s,type:t.type||"real",isMock:!!t.isMock,incomplete:n};return console.log("üßº normalizeTicker ‚Üí",p),p}function fn(t,n){const r=new Map;return t.forEach(a=>{const s=new Date(a.timestamp).toISOString().split("T")[0];r.set(s,a)}),n.forEach(a=>{const s=new Date(a.timestamp).toISOString().split("T")[0];r.set(s,a)}),Array.from(r.values()).sort((a,s)=>new Date(a.timestamp)-new Date(s.timestamp))}const Pe=new Map;let Je=0,xt=Date.now();function jt(){const t=Date.now();t-xt>=6e4&&(Je=0,xt=t)}function yn(){return!0}function bn(){jt(),Je++,console.log(`üìä Global API Request #${Je} (unlimited)`)}function Ct(t){return Pe.has(t)||Pe.set(t,{count:0,resetTime:Date.now()}),Pe.get(t)}function wn(t){const n=Ct(t);n.count++,console.log(`üìä Watchlist ${t} API Request #${n.count}`)}function Sn(){const t=new Date,n=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),r=n.getDay(),i=n.getHours(),a=n.getMinutes();return!(r===0||r===6||i<9||i===9&&a<30||i>16||i===16&&a>0)}function vn(t,n=100){const r=[];for(let i=0;i<t.length;i+=n)r.push(t.slice(i,i+n));return r}class kn{constructor(){this.activeFetches=new Map}isFetchActive(n){const r=this.activeFetches.get(n);return r&&r.status==="active"}getFetchStatus(n){const r=this.activeFetches.get(n);return r?{status:r.status,currentBatch:r.currentBatch,totalBatches:r.totalBatches,progress:r.totalBatches>0?`${r.currentBatch}/${r.totalBatches}`:null}:null}cancelFetch(n){const r=this.activeFetches.get(n);r&&r.abortController&&(r.abortController.abort(),r.status="cancelled",Pe.delete(n))}pauseFetch(n){const r=this.activeFetches.get(n);r&&r.status==="active"&&(r.status="paused",r.abortController&&r.abortController.abort())}async resumeFetch(n,r,i){const a=this.activeFetches.get(n);!a||a.status!=="paused"||await this._executeFetch(n,r,i,a.currentBatch)}async startFetch(n,r,i,a=!1,s=!1){if(!Sn()&&!s)return a?{success:!1,message:"Market is closed"}:{success:!1,message:null};if(this.isFetchActive(n))return a?{success:!1,message:"Fetch already in progress"}:{success:!1,message:null};const p=this.activeFetches.get(n);return p&&p.status==="paused"?(await this.resumeFetch(n,r,i),{success:!0,message:null}):(await this._executeFetch(n,r,i,0),{success:!0,message:null})}async _executeFetch(n,r,i,a=0){const s=r.filter(x=>x.type==="real"&&!x.isMock);if(s.length===0)return;const p=100,l=vn(s,p),c=new AbortController;Pe.set(n,{count:0,resetTime:Date.now()}),this.activeFetches.set(n,{status:"active",currentBatch:a,totalBatches:l.length,abortController:c});try{for(let x=a;x<l.length;x++){if(c.signal.aborted){this.activeFetches.delete(n);return}const d=this.activeFetches.get(n);d&&(d.currentBatch=x+1);const u=l[x],y=await this._processBatch(u,r,c,n);if(i&&typeof i=="function"){const T=(x+1)*p>s.length?s.length:(x+1)*p;i(y,{tickersFetched:T,totalTickers:s.length})}}this.activeFetches.delete(n),Pe.delete(n)}catch(x){if(x.name==="AbortError")this.activeFetches.delete(n),Pe.delete(n);else{console.error(`‚ùå Error in fetch for ${n}:`,x);const d=this.activeFetches.get(n);d&&(d.status="failed"),Pe.delete(n)}}}async _processBatch(n,r,i,a){const s=[...r];for(const p of n){if(i.signal.aborted)throw new Error("Fetch cancelled");try{yn(),bn(),wn(a);const l=await at(p.symbol);if(!l||typeof l!="object"||!l.historicalData||l.historicalData.length===0){console.warn(`‚ö†Ô∏è Skipping ${p.symbol} due to invalid ticker object:`,l);continue}const c=l.historicalData;if(!c||c.length===0){console.warn(`‚ö†Ô∏è Skipping ${p.symbol} due to no historical data`);continue}const x=p.historicalData||[],d=fn(x,c);console.log(`üìä ${p.symbol}: Merged ${x.length} existing + ${c.length} new = ${d.length} total data points`);const u=new Date(p.buyDate),y=d.filter(f=>new Date(f.timestamp)>=u),T={...p,historicalData:updatedHistoricalData},I={...Ve(T),buyPrice:p.buyPrice,buyDate:p.buyDate,type:p.type,isMock:p.isMock,addedAt:p.addedAt},$=s.findIndex(f=>f.symbol===p.symbol);$!==-1&&(s[$]=I)}catch(l){console.error(`‚ùå Error refreshing ${p.symbol}:`,l)}}return s}getRequestStatus(){return jt(),{current:Je,limit:"unlimited",remaining:"unlimited",resetIn:0}}getWatchlistRequestStatus(n){const r=Ct(n);return{current:r.count,resetTime:r.resetTime}}cleanup(){for(const[n,r]of this.activeFetches)r.abortController&&r.abortController.abort();this.activeFetches.clear()}}const fe=new kn,ve=({message:t,type:n="info",onClose:r})=>{if(!t)return null;const i=J(n==="error"?"#1a0f0f":n==="success"?"#0f1a0f":n==="loading"?"#0a0a0a":"#0f0f0f"),a=J("#8CB9A2"),s=J(n==="error"?"#e31507":n==="success"?"#0de309":"#8CB9A2");return e.jsx("div",{style:{background:i,color:a,border:`2px solid ${s}`,padding:"12px 16px",textAlign:"center",fontFamily:"Courier New",fontSize:14,fontWeight:"bold",position:"relative",marginBottom:8,cursor:r?"pointer":"default",userSelect:"none",opacity:1,borderRadius:0,boxShadow:"0 2px 8px rgba(0,0,0,0.3)",letterSpacing:"0.5px",textTransform:"uppercase",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(4px)",minHeight:"44px","@media (max-width: 768px)":{padding:"10px 12px",fontSize:13,letterSpacing:"0.3px"},"@media (max-width: 480px)":{padding:"8px 10px",fontSize:12,letterSpacing:"0.2px",minHeight:"40px"}},onClick:r,"aria-label":r?"Dismiss notification":void 0,tabIndex:r?0:void 0,role:"alert",children:t})},Z=({children:t,onClick:n,type:r="button",style:i={},disabled:a=!1,mobile:s=!1,...p})=>{const l=J(a?"#444":"#000"),c=J("#8CB9A2"),x=J("#8CB9A2"),d=s?{minHeight:"44px",fontSize:"16px",padding:"12px 16px",borderRadius:"0",transition:"all 0.2s ease",":active":{backgroundColor:c,color:l}}:{};return e.jsx("button",{type:r,onClick:n,disabled:a,style:{backgroundColor:l,color:c,border:`1px solid ${x}`,padding:s?"12px 16px":"6px 16px",fontFamily:"Courier New",fontSize:s?"16px":"15px",cursor:a?"not-allowed":"pointer",opacity:a?.6:1,borderRadius:s?0:2,margin:s?"4px":"2px",minHeight:s?"44px":"auto",transition:"all 0.2s ease",...d,...i},...p,children:t})},At="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAGSElEQVR4Xu2dsXMcNRjFpXWG8QwFlHSELiUlJWly8VCQNMxQ2Ng1FWPHlISSwRn/CRfsghJ3xmmcMmXo6HBJkSIzUHiGywotOExu4uN+n28VnbTvSvvtJ+l9b5+0WknrnX6DZsAPuvVqvJMABi4CCUACGDgDA2++HEACGDgDA2++HEACGDgDA2++HEACqI+BvZPxjdBee4+07N7a+mOCqxVTpQPsnRz8FBN2hyRtZ7RRJQek7R2mysbPFkDX3DDFjQRApVIQTg7AkzUwB3idGDkAF0sxSDkAT5UcQINArpZSkHIAnik5gByAq6UUpByAZ0oOIAfgasmJ3D8eX580zWbfdbg3+uJ+3zFLileMA+ydHMap3dBN8YKfv7szWj8CwMFDJICBS0ACkADKYEBdQJo8yQHS8FpMVAmgmFSlqagEkIbXYqJKAMWkKk1FJYA0vBYTVQIoJlVpKppdAA9ODn4jTYsr+VYjbmqlbxP/0F5ysW/d1vbaxkMS11D+k7h66HMS04LJXX52AcQ3d9OrNC3szcTyqWBD+UdRAHd7qd4rQXKXLwFwAUoAfau/i2e4AwzFywEoWXIAOQDVShqcHACPgZJ0QXIAOUCaO5tGlQPIAfQYyO4WdQGX8XT5ZJCeApimlmB3cIouwDITyMv3T0PrviLEhnby6+4nW78T7N6jw1OC8y6ctS/8DwRrKV+DQD4IJNxfYLgD0aCpVkQtsQBe38tPyYrGhlcFcwfgpVvKp1EHKABKzWU4CYAui19iB5AAXmVADmDSgxxADgB3BmkMYLqz+gfnTsCVyp+1EuU/ergDUUbVBVCm/sHxBFxJAHPrwsufG+oCIAFQpiQA0w2gpwBNBJluLQTu7Cq49kMC9s5/Q3BGzFFw4RdyTYryLVPRpI4d5vvjw499E9i0sWFRbBIHsBzRQgkoCzfwMYAEIAHgw5rLurNpbSUACQBORFFJFfUYqC5ADiAHkAOwDzZQCywLJweQA8gB5AB9upYGgX2ymTxWQV1Aiv3pDx4djENwm8l5XtYCvHvmg/uTVG97tPEBwd0/Ha++cz59PsKs695affvZlzc/Q+V7w+tQvDFBj4Ekpf9icn+yRgLguUqClACS0FpOUAmgnFwlqakEkITWAoJerCuUAArIVcoqSgAp2S0gtgRAkjR3GTYJspwYCWA589JfreaItxwBeP9459b6TcJMopnA5877p6R8F8KNiJs6VRRdlwFEBbB/On53cn4NLbQ1nQ9Q0ExglTORVADJXga9EQF0pwAtvv5YAkjw1bSSpoIlAAmAHdZc0suouruAfqz/5dAsuwMscmjNrPFl3QLod1SdXQD9Nsf2OrjsQWA/zEkAGgNoDMDuJb4kTU8BjNFkKI0BOLXqAnJ2AXEEfNa6gI4q9a75NH7qHU1b4vwbpqJTnE9wtfZ3n7TqXgbM/sVzDL4lHDTev08X2lrOJ7B0AaSeKTHYASyVeCMzoZYK9YJNMwbopWoLBJEAMHkSAKZKDpDkkCTMvwUoB8BsyQEwVXKAhRwgxez4zNzJAbCs5QCYKjnAQg6Aee4DKAfALMoBMFVyADkA/WwddqD8C1IMDrB/PL5ObpdJs/JRHPL9SLAWzEr7Yu7++NUY8I/WndMvcVnKp+3/y1B+olXRuFmmqWAa1bYggUbNvz+e15Qji3IA2iwJgDLlnATAucp+QoahqhgqAWCq1AUYqDJADYNAGlVdAGVKXQBnKiLpkihT0MxgdQGGBEgABrIwVF0ApioFUA5gYFUOYCALQxM4gOWjRbieERhaj84cCCuT57u3ttj5AJYKQKxlf37ThK/j/PJtGJrC8PkIbeu+2729/jMJjDdtp3oKIJW8wOC5eENMDK21/RIAlIAEEL8FGA27+w5Arp8cYMS2xlkSJAeAbMkB5ABVOqAcQA7AGKjVAlnru/n9OsdAcgCoAAmg0jsA5l8OUOsdIAFABrrFk5Om2STwFOcDWPbnkzpaMZb9+ZbY+HyA1p9tr208tMQmWDwGIMFeYvK/DbPUNi8298uwZAKI52Lc6c7H0O//GahWALHZceJEv3kMSADzGKr8/xJAVQm2b5eXAKoSgL0xEoCds6quGKQAKv4GlFmcgxSAmSXjBfae2FhAj3AJoEcySwyVWwB/A6OnkMyQojWgAAAAAElFTkSuQmCC",Dt="/assets/logoblack-DKuJLvT7.png",Re=()=>{const[t,n]=h.useState(""),[r,i]=h.useState("info"),[a,s]=h.useState(null);h.useEffect(()=>()=>{a&&clearTimeout(a)},[a]);const p=h.useCallback((c,x="info")=>{if(a&&clearTimeout(a),n(c),i(x),c){const d=setTimeout(()=>{n(""),i("info")},4e3);s(d)}},[a]),l=h.useCallback(()=>{a&&(clearTimeout(a),s(null)),n(""),i("info")},[a]);return{notification:t,notificationType:r,setNotification:p,setNotificationType:i,clearNotification:l}},tt=t=>t.toString().toLowerCase().trim().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),xe="rgb(140,185,162)",jn=({watchlists:t={},setWatchlists:n})=>{const r=$e(),i=Fe(),[a,s]=h.useState("terminal"),{notification:p,notificationType:l,setNotification:c,setNotificationType:x}=Re(),[d,u]=h.useState(!1),[y,T]=h.useState(!1),I="MAX",[$,f]=h.useState(!1),[v,F]=h.useState(null),{isInverted:H,toggleTheme:Y}=Ne(),P=J(xe),K=J("black"),b=J("#e31507"),V=J("#888"),W=h.useMemo(()=>{const g=Object.values(t).flatMap(w=>(w.items||[]).map(L=>L.symbol)).filter(w=>w&&typeof w=="string"&&!w.startsWith("#"));return Array.from(new Set(g.map(w=>w.toUpperCase())))},[t]),[M,B]=h.useState(()=>{const g=localStorage.getItem("burnlist_fetch_count");return g?parseInt(g,10):0});function X(){const g=new Date,w=new Date(g.toLocaleString("en-US",{timeZone:"America/New_York"}));return w.getHours()===9&&w.getMinutes()===29}h.useEffect(()=>{const g=setInterval(()=>{X()&&(B(0),localStorage.setItem("burnlist_fetch_count","0"))},6e4);return()=>clearInterval(g)},[]),h.useEffect(()=>()=>{fe.cancelFetch("homepage")},[]);const D=()=>{T(!0),setTimeout(()=>T(!1),150);const g=ht[Math.floor(Math.random()*ht.length)],w=tt(g);if(Object.values(t).some(O=>O.name&&O.name.toLowerCase()===g.toLowerCase())){c("‚ö†Ô∏è Name already exists"),x("error");return}const C={id:_e(),name:g,slug:w,items:[],reason:"",createdAt:new Date().toISOString()},A={...t,[C.id]:C};n(A),localStorage.setItem("burnlist_watchlists",JSON.stringify(A)),c("")},S=g=>{const w=Object.keys(t).find(A=>t[A].id===g);if(!w){console.log("üóëÔ∏è Could not find watchlist with id:",g);return}const{[w]:L,...C}=t;n(C),localStorage.setItem("burnlist_watchlists",JSON.stringify(C)),L?console.log("üóëÔ∏è Deleted watchlist:",L.name):console.log("üóëÔ∏è Deleted watchlist with id:",g)};h.useCallback((g,w)=>{if(Object.values(t).some(C=>C.id!==g&&C.name&&C.name.toLowerCase()===w.toLowerCase())){c("‚ö†Ô∏è Name already exists"),x("error");return}n(C=>{const A={...C};if(A[g]&&(A[g]={...A[g],name:w,slug:tt(w)},typeof w=="string"&&w.startsWith("!"))){const O=Ue({numTickers:4,days:130});A[g].items=O.items}return localStorage.setItem("burnlist_watchlists",JSON.stringify(A)),A})},[n,t]);const z=h.useCallback((g,w)=>{const L={...t,[g]:{...t[g],reason:w}};n(L),localStorage.setItem("burnlist_watchlists",JSON.stringify(L))},[n,t]),k=()=>{try{const g={};for(let O=0;O<localStorage.length;O++){const _=localStorage.key(O);if(_)try{const Q=localStorage.getItem(_);try{g[_]=JSON.parse(Q)}catch{g[_]=Q}}catch(Q){console.warn(`Could not export localStorage key: ${_}`,Q)}}const w={localStorage:g,exportInfo:{timestamp:new Date().toISOString(),totalKeys:Object.keys(g).length,keys:Object.keys(g)}},L=JSON.stringify(w,null,2),C=new Blob([L],{type:"application/json"}),A=document.createElement("a");A.href=URL.createObjectURL(C),A.download=`burnlist_complete_backup_${new Date().toISOString().split("T")[0]}.json`,A.click(),c(`‚úÖ All localStorage data exported (${Object.keys(g).length} keys)`,"success")}catch(g){console.error("Export error:",g),c("‚ùå Export failed","error")}},E=g=>{const w=g.target.files[0];if(!w)return;const L=new FileReader;L.onload=C=>{try{const A=JSON.parse(C.target.result);if(A.localStorage&&A.exportInfo){const O=A.localStorage;let _=0;if(Object.keys(O).forEach(Q=>{try{const le=O[Q];typeof le=="string"?localStorage.setItem(Q,le):localStorage.setItem(Q,JSON.stringify(le)),_++}catch(le){console.warn(`Could not import localStorage key: ${Q}`,le)}}),O.burnlist_watchlists)try{const Q=typeof O.burnlist_watchlists=="string"?JSON.parse(O.burnlist_watchlists):O.burnlist_watchlists;n(Q)}catch(Q){console.warn("Could not parse watchlists data",Q)}if(O.burnlist_fetch_count)try{const Q=typeof O.burnlist_fetch_count=="string"?parseInt(O.burnlist_fetch_count):O.burnlist_fetch_count;B(Q)}catch(Q){console.warn("Could not parse fetch count data",Q)}c(`‚úÖ Complete backup imported (${_} keys)`,"success")}else{if(!A.watchlists||typeof A.watchlists!="object")throw new Error("Invalid data format: missing watchlists");n(A.watchlists),localStorage.setItem("burnlist_watchlists",JSON.stringify(A.watchlists)),A.fetchCount!==void 0&&(B(A.fetchCount),localStorage.setItem("burnlist_fetch_count",String(A.fetchCount))),A.tradeJournalTrades&&Array.isArray(A.tradeJournalTrades)&&localStorage.setItem("trade_journal_trades",JSON.stringify(A.tradeJournalTrades)),c("‚úÖ Legacy data imported successfully","success")}}catch(A){console.error("Import error:",A),c("‚ùå Import failed: Invalid file format","error")}},L.readAsText(w),g.target.value=""},[G,te]=h.useState({});h.useEffect(()=>{if(d){const g={};Object.values(t).forEach(w=>{g[w.id]={value:w.name,prev:w.name}}),te(g)}else te({})},[d,t]);const re=(g,w)=>{te(L=>({...L,[g]:{...L[g],value:w}}))},se=g=>{const w=G[g]?.value||"";if(Object.values(t).some(C=>C.id!==g&&C.name&&C.name.toLowerCase()===w.toLowerCase())){c("‚ö†Ô∏è Name already exists"),x("error"),te(C=>({...C,[g]:{...C[g],value:C[g].prev}}));return}n(C=>{const A={...C};if(A[g]&&(A[g]={...A[g],name:w,slug:tt(w)},typeof w=="string"&&w.startsWith("!"))){const O=Ue({numTickers:4,days:130});A[g].items=O.items}return localStorage.setItem("burnlist_watchlists",JSON.stringify(A)),A}),te(C=>({...C,[g]:{...C[g],prev:w}}))},ie=h.useMemo(()=>Object.values(t),[t]),ye=h.useMemo(()=>ie.map(g=>{const w=g.items||[];if(!w.length)return 0;const L=w.map(C=>{const A=C.historicalData;if(!Array.isArray(A)||A.length<2)return 0;const O=A[0]?.price,_=A[A.length-1]?.price;return typeof O!="number"||typeof _!="number"||O===0?0:(_-O)/O*100});return L.reduce((C,A)=>C+A,0)/L.length}),[ie]),U=h.useRef(null);return e.jsx("div",{style:{fontFamily:"Courier New",color:P,backgroundColor:K,minHeight:"100vh",padding:"0",transition:"background 0.3s, color 0.3s"},children:e.jsxs("div",{style:{padding:"32px","@media (max-width: 768px)":{padding:"16px",paddingBottom:"80px"},"@media (max-width: 480px)":{padding:"12px",paddingBottom:"80px"}},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24,flexWrap:"wrap",gap:"12px","@media (max-width: 768px)":{flexDirection:"column",alignItems:"flex-start",marginBottom:16}},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,"@media (max-width: 480px)":{gap:8}},children:[e.jsx("button",{onClick:Y,style:{border:"none",background:"none",padding:0,cursor:"pointer",display:"flex",alignItems:"center",minHeight:"44px"},"aria-label":"Toggle theme",children:e.jsx("img",{src:H?Dt:At,alt:"Burnlist Logo",style:{width:40,height:40,marginRight:10,transition:"filter 0.3s","@media (max-width: 480px)":{width:32,height:32,marginRight:8}}})}),e.jsx("strong",{style:{fontSize:"170%",lineHeight:"40px",display:"inline-block",color:P,"@media (max-width: 768px)":{fontSize:"140%",lineHeight:"32px"},"@media (max-width: 480px)":{fontSize:"120%",lineHeight:"28px"}},children:"BURNLIST v1.1"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,"@media (max-width: 768px)":{alignSelf:"flex-end"}},children:[e.jsx("span",{style:{color:b,fontWeight:"bold",fontSize:12},children:W.length}),e.jsx("span",{style:{color:P,fontWeight:"bold",fontSize:12},children:M}),e.jsx("span",{onClick:()=>{const g=JSON.parse(localStorage.getItem("burnlist_watchlists"));console.log("üß™ Current localStorage burnlist_watchlists:",g)},style:{cursor:"pointer",color:P},children:"ACCOUNT: local"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",borderBottom:`1px solid ${xe}`,background:"rgba(0,0,0,0.3)",gap:"10px",marginBottom:"20px"},children:[e.jsx(Z,{onClick:()=>r("/universes"),style:{background:i.pathname==="/universes"||i.pathname.startsWith("/universe/")?xe:"transparent",color:i.pathname==="/universes"||i.pathname.startsWith("/universe/")?"#000000":xe,border:`1px solid ${xe}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"UNIVERSE"}),e.jsx(Z,{onClick:()=>r("/journal"),style:{background:i.pathname==="/journal"?xe:"transparent",color:i.pathname==="/journal"?"#000000":xe,border:`1px solid ${xe}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"JOURNAL"}),e.jsx(Z,{onClick:()=>r("/market"),style:{background:i.pathname==="/market"?xe:"transparent",color:i.pathname==="/market"?"#000000":xe,border:`1px solid ${xe}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"MARKET"}),e.jsx(Z,{onClick:()=>s(a==="terminal"?"graph":"terminal"),style:{background:a==="graph"?xe:"transparent",color:a==="graph"?"#000000":xe,border:`1px solid ${xe}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"GRAPH VIEW"})]}),p&&e.jsx("div",{style:{position:"fixed",top:24,left:0,right:0,zIndex:10001,display:"flex",justifyContent:"center",pointerEvents:"none","@media (max-width: 480px)":{top:12}},children:e.jsx("div",{style:{minWidth:320,maxWidth:480,pointerEvents:"auto","@media (max-width: 480px)":{minWidth:"90vw",maxWidth:"90vw"}},children:e.jsx(ve,{message:p,type:l,onClose:()=>c("")})})}),$&&e.jsx(ve,{message:"Loading watchlists...",type:"loading"}),v&&e.jsx(ve,{message:v,type:"error",onClose:()=>F(null)}),Object.keys(t).length===0&&e.jsx("p",{children:"No watchlists found."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(252px, 252px))",rowGap:"20px",columnGap:"20px",margin:"70px 0 1px 0",justifyContent:"center",alignItems:"start","@media (max-width: 768px)":{gridTemplateColumns:"repeat(auto-fit, minmax(200px, 200px))",rowGap:"16px",columnGap:"16px",margin:"40px 0 1px 0"},"@media (max-width: 480px)":{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 180px))",rowGap:"12px",columnGap:"12px",margin:"20px 0 1px 0"}},children:ie.map((g,w,L)=>{const C=g.items||[],A=ye[w],O=A>=0;let _=C.length===0?"None":"LOW";if(C.length>0){const ee=C.map(he=>{const ce=he.historicalData;if(!Array.isArray(ce)||ce.length<2)return{symbol:he.symbol,return:0};const Te=ce[0]?.price,Ee=ce[ce.length-1]?.price;if(typeof Te!="number"||typeof Ee!="number"||Te===0)return{symbol:he.symbol,return:0};const je=(Ee-Te)/Te*100;return{symbol:he.symbol,return:je}});ee.reduce((he,ce)=>ce.return>he.return?ce:he,ee[0]),ee.reduce((he,ce)=>ce.return<he.return?ce:he,ee[0]);const ne=Math.min(...ee.map(he=>he.return)),pe=Math.max(...ee.map(he=>he.return))-ne;ne<-20||pe>50?_="HIGH":ne<-10||pe>30?_="MED":_="LOW"}let Q="Unknown";if(C.length>0){const ee=C.flatMap(ne=>ne.historicalData?.map(Ce=>new Date(Ce.timestamp).getTime())||[]);if(ee.length>0){const ne=Math.max(...ee),Ce=Date.now(),pe=Math.floor((Ce-ne)/(1e3*60*60));pe<1?Q="Just now":pe<24?Q=`${pe}h ago`:Q=`${Math.floor(pe/24)}d ago`}}const le=e.jsxs("div",{style:{width:"100%",maxWidth:252,height:d?160:a==="graph"?200:120,fontFamily:"Courier New",background:"transparent",padding:"10px 8px",margin:0,border:`1px solid ${P}`,borderRadius:0,boxShadow:"none",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",position:"relative",boxSizing:"border-box",overflow:"hidden","@media (max-width: 768px)":{height:d?120:a==="graph"?160:90,padding:"6px 4px"},"@media (max-width: 480px)":{height:d?110:a==="graph"?140:70,padding:"4px 3px"}},children:[d?e.jsx("input",{value:G[g.id]?.value??g.name,onChange:ee=>re(g.id,ee.target.value),onBlur:()=>se(g.id),onKeyDown:ee=>{ee.key==="Enter"&&(ee.preventDefault(),se(g.id))},style:{fontFamily:"Courier New",fontSize:16,color:P,background:"transparent",border:`1px solid ${P}`,marginBottom:2,padding:"2px 4px",width:"100%",fontWeight:"bold",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minHeight:"24px","@media (max-width: 768px)":{fontSize:14,padding:"1px 3px",minHeight:"20px"},"@media (max-width: 480px)":{fontSize:12,padding:"1px 2px",minHeight:"18px"}}}):e.jsx("div",{style:{fontSize:18,color:P,fontWeight:"bold",marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","@media (max-width: 768px)":{fontSize:14,marginBottom:2},"@media (max-width: 480px)":{fontSize:12,marginBottom:1}},children:g.name||`PORTFOLIO ${w+1}`}),d&&e.jsx("button",{onClick:()=>S(g.id),style:{backgroundColor:"transparent",color:b,border:`1px solid ${b}`,padding:"1px 4px",marginBottom:2,fontSize:9,width:"100%",fontWeight:"bold",fontFamily:"Courier New",cursor:"pointer",minHeight:"16px","@media (max-width: 768px)":{fontSize:8,padding:"1px 3px",minHeight:"14px"},"@media (max-width: 480px)":{fontSize:7,padding:"1px 2px",minHeight:"12px"}},children:"DELETE"}),d?e.jsx("input",{value:g.reason||"",onChange:ee=>z(g.id,ee.target.value),style:{fontFamily:"Courier New",fontSize:12,color:P,background:"transparent",border:`1px solid ${P}`,marginBottom:2,padding:"1px 3px",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minHeight:"18px","@media (max-width: 768px)":{fontSize:10,padding:"1px 2px",minHeight:"16px"},"@media (max-width: 480px)":{fontSize:9,padding:"1px 2px",minHeight:"14px"}},placeholder:"Reason..."}):a!=="graph"&&e.jsx("div",{style:{fontSize:14,color:P,marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","@media (max-width: 768px)":{fontSize:11,marginBottom:2},"@media (max-width: 480px)":{fontSize:9,marginBottom:1}},children:g.reason||"N/A"}),e.jsxs("div",{style:{fontSize:13,color:P,marginBottom:2,"@media (max-width: 768px)":{fontSize:10,marginBottom:1},"@media (max-width: 480px)":{fontSize:8,marginBottom:1}},children:[C.length," stocks | Risk: ",_]}),e.jsx("div",{style:{fontSize:11,color:V,marginBottom:2,"@media (max-width: 768px)":{fontSize:9,marginBottom:1},"@media (max-width: 480px)":{fontSize:7,marginBottom:1}},children:Q}),a!=="graph"&&C.length>0&&e.jsxs("div",{style:{fontSize:19,color:O?P:b,fontWeight:"bold",marginBottom:2,"@media (max-width: 768px)":{fontSize:14,marginBottom:1},"@media (max-width: 480px)":{fontSize:12,marginBottom:1}},children:[A>=0?"+":"",A.toFixed(2),"%"]}),a==="graph"&&C.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:19,color:O?P:b,fontWeight:"bold",marginBottom:2,"@media (max-width: 768px)":{fontSize:14,marginBottom:1},"@media (max-width: 480px)":{fontSize:12,marginBottom:1}},children:[A>=0?"+":"",A.toFixed(2),"%"]}),e.jsx("div",{style:{width:"100%",maxWidth:180,height:94,alignSelf:"flex-end",border:`1.5px solid ${P}`,borderRadius:0,background:"transparent",padding:1,marginTop:2,display:"flex",justifyContent:"flex-end",alignItems:"flex-end","@media (max-width: 768px)":{height:60,maxWidth:140,marginTop:1},"@media (max-width: 480px)":{height:50,maxWidth:120,marginTop:1}},children:e.jsx(ot,{portfolioReturnData:C.map(ee=>({symbol:ee.symbol,buyDate:ee.buyDate,historicalData:ee.historicalData,timeframe:I})),showBacktestLine:!1,height:94,lineColor:O?P:b,hideAxes:!0,hideBorder:!0,showTooltip:!1,mini:!0})})]})]});return e.jsx("div",{style:{margin:0},children:d?le:e.jsx(Ke,{to:`/watchlist/${g.slug}`,style:{textDecoration:"none",color:"inherit"},children:le})},g.id)})}),e.jsxs("div",{className:"action-buttons-container",children:[e.jsx("style",{children:`
            .action-buttons-container {
              position: fixed;
              bottom: 20px;
              right: 20px;
              display: flex;
              gap: 8px;
              z-index: 1000;
            }
            
            @media (max-width: 768px) {
              .action-buttons-container {
                position: fixed;
                top: 50%;
                right: 10px;
                transform: translateY(-50%);
                flex-direction: column;
                gap: 8px;
              }
            }
            
            @media (max-width: 480px) {
              .action-buttons-container {
                position: fixed;
                top: 50%;
                right: 8px;
                transform: translateY(-50%);
                flex-direction: column;
                gap: 6px;
              }
            }
            
            .action-button {
              background: ${K};
              color: ${P};
              border: 1px solid ${P};
              font-size: 12px;
              padding: 6px 12px;
              box-shadow: 0 2px 4px rgba(0,0,0,0.3);
              min-height: 32px;
              font-family: 'Courier New', monospace;
              cursor: pointer;
              text-decoration: none;
              display: flex;
              align-items: center;
              justify-content: center;
            }
            
            @media (max-width: 768px) {
              .action-button {
                font-size: 10px;
                padding: 6px 8px;
                min-height: 32px;
                width: 60px;
              }
            }
            
            @media (max-width: 480px) {
              .action-button {
                font-size: 9px;
                padding: 4px 6px;
                min-height: 28px;
                width: 50px;
              }
            }
          `}),e.jsx("button",{onClick:D,className:"action-button",style:{backgroundColor:P,color:K,fontWeight:"bold",fontSize:"14px",transition:"all 0.2s ease-in-out",padding:"8px 16px"},children:"+++"}),e.jsx("button",{onClick:()=>{u(!d),console.log("üõ†Ô∏è Edit mode:",!d)},className:"action-button",style:{textTransform:"lowercase",fontWeight:400,letterSpacing:1},children:d?"done":"edit"}),e.jsx("input",{type:"file",accept:".json",onChange:E,style:{display:"none"},ref:U}),e.jsx("button",{onClick:()=>U.current&&U.current.click(),className:"action-button",style:{textTransform:"lowercase",fontWeight:400,letterSpacing:1},children:"import"}),e.jsx("button",{onClick:k,className:"action-button",style:{textTransform:"lowercase",fontWeight:400,letterSpacing:1},children:"export"})]})]})})},Cn="modulepreload",An=function(t){return"/"+t},mt={},Dn=function(n,r,i){let a=Promise.resolve();if(r&&r.length>0){let c=function(x){return Promise.all(x.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),l=p?.nonce||p?.getAttribute("nonce");a=c(r.map(x=>{if(x=An(x),x in mt)return;mt[x]=!0;const d=x.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${u}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":Cn,d||(y.as="script"),y.crossOrigin="",y.href=x,l&&y.setAttribute("nonce",l),document.head.appendChild(y),d)return new Promise((T,I)=>{y.addEventListener("load",T),y.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${x}`)))})}))}function s(p){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=p,window.dispatchEvent(l),!l.defaultPrevented)throw p}return a.then(p=>{for(const l of p||[])l.status==="rejected"&&s(l.reason);return n().catch(s)})},Nt="/assets/backbutton-BUBWvZGf.png",Nn="rgb(140,185,162)",Tt=({name:t,averageReturn:n,selected:r,setWatchlists:i,notification:a,onNotificationClose:s,onRefresh:p,realStockCount:l,etfPriceData:c,twapData:x})=>{const{isInverted:d}=Ne(),u=J(Nn),y=J("black"),T=J("#e31507"),I=J("#FFA500"),$=J("#888");console.log("üìä WatchlistHeader received averageReturn:",n),(Number.isFinite(n)?n:null)===null&&console.warn("‚ö†Ô∏è averageReturn is invalid:",n);const v=l||0,{slug:F}=rt(),[H,Y]=h.useState(!1),[P,K]=h.useState(null),[b,V]=h.useState(null),[W,M]=h.useState(""),[B,X]=h.useState(null);h.useEffect(()=>{const S=()=>{const k=new Date,E=localStorage.getItem(`burnlist_last_refresh_${F}`),G=E?new Date(E):new Date(k.getTime()-30*60*1e3),re=new Date(G.getTime()+30*60*1e3).getTime()-k.getTime();if(re>0){const se=Math.floor(re/6e4),ie=Math.floor(re%(1e3*60)/1e3);K(`${se}:${ie.toString().padStart(2,"0")}`)}else K(null)};S();const z=setInterval(S,1e3);return()=>clearInterval(z)},[F]),h.useEffect(()=>{const S=()=>{const k=fe.getWatchlistRequestStatus(F);X(k)};S();const z=setInterval(S,1e3);return()=>clearInterval(z)},[F]),h.useEffect(()=>{const S=()=>{const k=fe.getFetchStatus(F);if(k&&k.status==="active"){const E=fe.activeFetches?.get?.(F);let G=null,te=null;E&&E.lastProgress&&(G=E.lastProgress.tickersFetched,te=E.lastProgress.totalTickers),V({tickersFetched:G,totalTickers:te}),Y(!0)}else V(null),Y(!1)};S();const z=setInterval(S,1e3);return()=>clearInterval(z)},[F]),h.useEffect(()=>{const S=fe.startFetch;return fe.startFetch=async function(z,k,E,G){return S.call(this,z,k,(te,re)=>{this.activeFetches&&this.activeFetches.get(z)&&(this.activeFetches.get(z).lastProgress=re),typeof E=="function"&&E(te,re)},G)},()=>{fe.startFetch=S}},[]);const D=async()=>{const S=fe.getFetchStatus(F);if(S&&S.status==="active"){fe.cancelFetch(F),M("Fetch cancelled"),setTimeout(()=>M(""),3e3);return}p&&typeof p=="function"?(console.log("üîÑ Refresh requested from header - calling parent"),p()):console.log("üîÑ Refresh requested from header - no parent handler")};return h.useEffect(()=>{if(t&&Array.isArray(t.items)){const S=t.items.filter(z=>z.type==="real"&&!z.isMock);setRealStockCount(S.length),console.log("üìä Real stocks count:",S.length)}},[t]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",position:"fixed",top:0,left:0,zIndex:1e4},children:[a&&e.jsx(ve,{notification:a,handleNotificationClose:s}),W&&e.jsx(ve,{notification:W,handleNotificationClose:()=>M("")}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.5rem 2rem",backgroundColor:y,color:u,fontFamily:"'Courier New', Courier, monospace",width:"100%","@media (max-width: 768px)":{padding:"1rem 1.5rem"},"@media (max-width: 480px)":{padding:"0.75rem 1rem",flexDirection:"column",alignItems:"flex-start",gap:"8px"}},children:[e.jsx("div",{style:{"@media (max-width: 480px)":{alignSelf:"flex-start"}},children:e.jsx("a",{href:"/",style:{display:"flex",alignItems:"center",textDecoration:"none",border:"none",background:"none",padding:0,gap:0,minHeight:"44px"},"aria-label":"back to home",children:e.jsx("img",{src:Nt,alt:"back",style:{width:22,height:22,filter:d?"invert(1)":"none","@media (max-width: 480px)":{width:20,height:20}}})})}),e.jsxs("div",{style:{textAlign:"right",paddingRight:"3.5rem",maxWidth:"60%","@media (max-width: 768px)":{paddingRight:"2rem",maxWidth:"70%"},"@media (max-width: 480px)":{textAlign:"left",paddingRight:0,maxWidth:"100%",width:"100%"}},children:[e.jsx("h1",{style:{margin:0,marginTop:"8px",fontSize:"2rem",whiteSpace:"nowrap",color:u,cursor:"pointer",textDecoration:"underline",textUnderlineOffset:"4px",transition:"color 0.2s",minHeight:"44px",display:"flex",alignItems:"center","@media (max-width: 768px)":{fontSize:"1.5rem",marginTop:"6px"},"@media (max-width: 480px)":{fontSize:"1.25rem",whiteSpace:"normal",wordBreak:"break-word",marginTop:"4px"}},onClick:D,title:H?"Cancel refresh":"Refresh watchlist",tabIndex:0,onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&D()},role:"button","aria-pressed":H,children:t||"Untitled Watchlist"}),b&&B&&e.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:B.current>0?I:$,cursor:B.current>0?"help":"default","@media (max-width: 480px)":{fontSize:"0.7rem",marginTop:"0.25rem"}},title:B.current>0?"API requests in progress - waiting 1 minute between batches":"",children:[B.current,"/",v," (",Math.round(B.current/v*100),"%)"]}),e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem","@media (max-width: 480px)":{fontSize:"0.7rem",marginTop:"0.25rem"}},children:b&&typeof b.tickersFetched=="number"&&typeof b.totalTickers=="number"?e.jsxs("span",{style:{color:T,fontWeight:"bold"},children:[b.tickersFetched,"/",b.totalTickers]}):P&&e.jsx("span",{style:{color:u},children:P})})]})]})]})},Tn="rgb(140,185,162)",Pt=({selected:t,onChange:n})=>{const r=J(Tn),i=J("black");return e.jsx("div",{style:{marginTop:10,marginBottom:10,display:"flex",gap:12,alignItems:"center",padding:"6px"},children:["D","W","M","YTD","Y","MAX"].map(a=>e.jsx("button",{onClick:()=>{console.log("Selected timeframe:",a),n(a)},style:{backgroundColor:t===a?r:"transparent",color:t===a?i:r,border:`1px solid ${r}`,height:"32px",minHeight:"32px",maxHeight:"32px",width:"40px",fontFamily:"'Courier New', Courier, monospace",fontSize:"0.9rem",cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",margin:0,padding:0},children:a},a))})};function st(t,n="MAX"){const r=h.useRef(!1);return h.useEffect(()=>{r.current=!0},[]),h.useMemo(()=>{if(console.log("üîç useAverageReturn called with items:",t),t.forEach((l,c)=>{const x=Array.isArray(l.historicalData)&&l.historicalData.length>0,d=!isNaN(Number(l.buyPrice));(!x||!d)&&console.warn(`‚ö†Ô∏è Item ${c} is malformed:`,{symbol:l.symbol,buyPrice:l.buyPrice,historicalData:l.historicalData})}),console.log(`‚è± Selected timeframe: ${n}`),!Array.isArray(t)||t.length===0)return r.current&&console.warn("‚ö†Ô∏è useAverageReturn received invalid or empty items"),0;t.some(l=>!l.buyDate)&&console.warn("‚ö†Ô∏è Some items are missing buyDate. This may cause invalid return calculations.");const a=t.filter((l,c)=>{const x=Array.isArray(l.historicalData)&&l.historicalData.length>=1,d=!isNaN(Number(l.buyPrice))&&Number(l.buyPrice)>0,u=!!l.buyDate&&new Date(l.buyDate).toString()!=="Invalid Date";return x?d?u?!0:(console.warn(`‚ö†Ô∏è Skipping item ${c} (${l.symbol}): invalid buyDate`,l.buyDate),!1):(console.warn(`‚ö†Ô∏è Skipping item ${c} (${l.symbol}): invalid buyPrice`,l.buyPrice),!1):(console.warn(`‚ö†Ô∏è Skipping item ${c} (${l.symbol}): insufficient historicalData`,l.historicalData),!1)}),s=a.map(l=>({symbol:l.symbol,historicalData:l.historicalData,buyDate:l.buyDate,buyPrice:l.buyPrice}));console.log(`üìä Proceeding with ${a.length} valid items (filtered ${t.length-a.length})`);const p=cn(s,n);return console.log(`‚úÖ Return from getAverageReturn for ${s.length} items: ${p.toFixed(2)}%`),p},[t,n,t.map(i=>i.buyPrice).join(","),JSON.stringify({timeframe:n,itemsLength:t.length})])}const qe=t=>{if(!t)return"-";const n=new Date(t);if(isNaN(n.getTime()))return"-";const r=String(n.getDate()).padStart(2,"0"),i=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getFullYear()).slice(-2);return`${r}-${i}-${a}`},Pn="rgb(140,185,162)",Fn=({item:t,index:n,editMode:r,handleChangeSymbol:i,handleBuyPriceChange:a,handleBuyDateChange:s,handleDelete:p,handleRefreshPrice:l,items:c,changePercent:x,lookedUpBuyPrice:d})=>{const u=J(Pn),y=J("black"),T=J("#e31507");if(console.log("üß© TickerRow received item:",t),console.log("üì¶ Historical Data:",t.historicalData),!t||!Array.isArray(t.historicalData))return console.warn("‚õî Invalid item or missing historicalData for row",t),null;let I=isNaN(Number(t.buyPrice))?t.historicalData.length>0?Number(t.historicalData[0]?.price):NaN:Number(t.buyPrice);const $=t.historicalData.at(-1)?.price,f=isNaN(Number($))?NaN:Number($);if(console.log(`üíµ Buy price for ${t.symbol}:`,I),console.log(`üìà Latest price for ${t.symbol}:`,f),isNaN(I))return console.warn(`‚õî Skipping row: No valid buy price resolved for ${t.symbol}`),null;console.log(`üìä [ChangePercent Prop] ${t.symbol}:`,x),console.log(`‚úÖ Rendering row for ${t.symbol}`);const v=F=>{if(!F)return;const H=`https://elite.finviz.com/charts?t=${F.toUpperCase()}&p=d&l=1h1v`;window.open(H,"_blank")};return e.jsxs("tr",{style:{borderBottom:`1px solid ${u}`,background:y},children:[e.jsx("td",{style:{padding:8,fontFamily:"'Courier New', Courier, monospace",color:u,fontSize:15},children:r?e.jsx("input",{type:"text",value:t.symbol,onChange:F=>i(n,F.target.value),style:{fontFamily:"'Courier New', Courier, monospace",fontSize:"1rem",backgroundColor:y,border:`1px solid ${u}`,color:u,padding:4,width:80,textTransform:"uppercase"}}):e.jsx("span",{onClick:()=>v(t.symbol),style:{cursor:"pointer",textDecoration:"underline",display:"flex",alignItems:"center",gap:"4px"},title:`Click to open ${t.symbol} chart in new tab`,children:(()=>{if(c.filter(H=>H.symbol===t.symbol).length>1){const H=c.slice(0,n).filter(P=>P.symbol===t.symbol).length,Y="*".repeat(H+1);return t.symbol+Y}return t.symbol})()})}),e.jsx("td",{style:{padding:8,fontFamily:"'Courier New', Courier, monospace",color:u,fontSize:15},children:r?e.jsx("input",{type:"number",value:isNaN(I)?"":I,step:"0.01",min:"0",onChange:F=>{typeof a=="function"&&a(n,parseFloat(F.target.value))},style:{fontFamily:"'Courier New', Courier, monospace",fontSize:"1rem",backgroundColor:y,border:`1px solid ${u}`,color:u,padding:4,width:80}}):isNaN(I)?"-":I.toFixed(2)}),e.jsx("td",{style:{padding:8,fontFamily:"'Courier New', Courier, monospace",color:u,fontSize:15},children:r?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:t.buyDate?t.buyDate.slice(0,10):"",onChange:F=>{typeof s=="function"&&s(n,F.target.value)},style:{fontFamily:"'Courier New', Courier, monospace",fontSize:"1rem",backgroundColor:y,border:`1px solid ${u}`,color:u,padding:4,width:120}}),e.jsx("style",{children:`
                input[type="date"]::-webkit-calendar-picker-indicator {
                  filter: invert(1) brightness(0.8) sepia(1) saturate(5) hue-rotate(140deg);
                }
                input[type="date"]::-webkit-clear-button {
                  display: none !important;
                }
                input[type="date"]::-webkit-inner-spin-button {
                  display: none !important;
                }
              `})]}):qe(t.buyDate)}),e.jsx("td",{style:{padding:8,fontFamily:"'Courier New', Courier, monospace",color:u,fontSize:15},children:isNaN(f)?"-":f.toFixed(2)}),e.jsx("td",{style:{padding:8,fontFamily:"'Courier New', Courier, monospace",color:u,fontSize:15},children:(()=>{const F=Number(x);return isFinite(F)?e.jsxs("span",{title:"Simulated return over selected timeframe",style:{color:F>=0?u:T,fontFamily:"'Courier New', Courier, monospace"},children:[F.toFixed(2),"%"]}):e.jsxs(e.Fragment,{children:[console.warn("‚ö†Ô∏è Missing or invalid changePercent for",t.symbol),e.jsx("span",{title:"Change % not available",style:{color:J("#888888"),fontFamily:"'Courier New', Courier, monospace"},children:"0.00%"})]})})()}),r&&e.jsx("td",{style:{padding:8},children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(Z,{onClick:()=>{typeof l=="function"&&l(n)},style:{background:"transparent",color:u,border:`1px solid ${u}`,fontFamily:"'Courier New', monospace",textTransform:"lowercase",fontWeight:400,letterSpacing:1,boxShadow:"none",borderRadius:2,fontSize:"0.8rem",padding:"2px 6px"},title:"Refresh buy price from historical data",children:"üîÑ"}),e.jsx(Z,{onClick:()=>{typeof p=="function"&&p(n)},style:{background:"transparent",color:u,border:`1px solid ${u}`,fontFamily:"'Courier New', monospace",textTransform:"lowercase",fontWeight:400,letterSpacing:1,boxShadow:"none",borderRadius:2},children:"delete"})]})}),e.jsx("td",{})]},n)},$n=De.memo(Fn);function En(t,n){return h.useMemo(()=>{if(!n?.key)return console.log("‚ÑπÔ∏è No sort key provided, returning original items"),t;console.log(`üîÉ Sorting items by ${n.key} (${n.direction})`);const r=[...t].sort((i,a)=>{const s=i.historicalData?.[i.historicalData.length-1]?.price??0,p=a.historicalData?.[a.historicalData.length-1]?.price??0;let l=n.key==="changePercent"?(s-i.buyPrice)/i.buyPrice*100:i[n.key],c=n.key==="changePercent"?(p-a.buyPrice)/a.buyPrice*100:a[n.key];return typeof l=="string"&&(l=l.toUpperCase()),typeof c=="string"&&(c=c.toUpperCase()),l<c?n.direction==="asc"?-1:1:l>c?n.direction==="asc"?1:-1:0});return console.log("‚úÖ Sorted items:",r),r},[t,n])}const Rn="rgb(140,185,162)",zn=({children:t,style:n={}})=>{const r=J(Rn),i=J("black");return e.jsx("div",{style:{width:"100%",border:`1px solid ${r}`,background:i,position:"relative",overflow:"auto",WebkitOverflowScrolling:"touch",touchAction:"pan-x","@media (max-width: 768px)":{fontSize:"12px"},"@media (max-width: 480px)":{fontSize:"10px"},...n},children:t})},In="rgb(140,185,162)",Wn=({items:t,editMode:n,handleChangeSymbol:r,handleBuyPriceChange:i,handleBuyDateChange:a,handleDelete:s,handleRefreshPrice:p,selectedTimeframe:l})=>{const c=J(In),x=J("black");if(!Array.isArray(t))return console.warn("‚ö†Ô∏è TickerTable received invalid items prop:",t),null;const[d,u]=h.useState({key:"symbol",direction:"asc"}),y=f=>{console.log(`üß≠ handleSort triggered for key: ${f}`),u(v=>v.key===f?{key:f,direction:v.direction==="asc"?"desc":"asc"}:{key:f,direction:"asc"})},T=f=>d.key!==f?"":d.direction==="asc"?"‚Üë":"‚Üì",I=En(t,d),$=st(I);return console.log("üìä Average return from sortedItems:",$),typeof window<"u"&&typeof window.setWatchlistAverageReturn=="function"&&window.setWatchlistAverageReturn($),e.jsx(zn,{children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",color:c,background:x,fontFamily:"Courier New",minWidth:"600px","@media (max-width: 768px)":{minWidth:"500px"},"@media (max-width: 480px)":{minWidth:"400px"}},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1px solid ${c}`},children:[e.jsxs("th",{onClick:()=>y("symbol"),style:{cursor:"pointer",padding:"8px 4px",textAlign:"left",color:c,borderBottom:`1px solid ${c}`,fontFamily:"Courier New",background:x,minWidth:"60px","@media (max-width: 480px)":{padding:"4px 2px",minWidth:"50px"}},children:["Symbol ",T("symbol")]}),e.jsxs("th",{onClick:()=>y("buyPrice"),style:{cursor:"pointer",padding:"8px 4px",textAlign:"left",color:c,borderBottom:`1px solid ${c}`,fontFamily:"Courier New",background:x,minWidth:"80px","@media (max-width: 480px)":{padding:"4px 2px",minWidth:"60px"}},children:["Buy Price ",T("buyPrice")]}),e.jsx("th",{style:{padding:"8px 4px",textAlign:"left",color:c,borderBottom:`1px solid ${c}`,fontFamily:"Courier New",background:x,minWidth:"80px","@media (max-width: 480px)":{padding:"4px 2px",minWidth:"60px"}},children:"Buy Date"}),e.jsxs("th",{onClick:()=>y("currentPrice"),style:{cursor:"pointer",padding:"8px 4px",textAlign:"left",color:c,borderBottom:`1px solid ${c}`,fontFamily:"Courier New",background:x,minWidth:"80px","@media (max-width: 480px)":{padding:"4px 2px",minWidth:"60px"}},children:["Current Price ",T("currentPrice")]}),e.jsxs("th",{onClick:()=>y("changePercent"),style:{cursor:"pointer",padding:"8px 4px",textAlign:"left",color:c,borderBottom:`1px solid ${c}`,fontFamily:"Courier New",background:x,minWidth:"80px","@media (max-width: 480px)":{padding:"4px 2px",minWidth:"60px"}},children:["Change % ",T("changePercent")]}),n&&e.jsx("th",{style:{padding:"8px 4px",textAlign:"left",color:c,borderBottom:`1px solid ${c}`,fontFamily:"Courier New",background:x,minWidth:"80px","@media (max-width: 480px)":{padding:"4px 2px",minWidth:"60px"}},children:"Actions"}),e.jsx("th",{style:{textAlign:"left",color:c,borderBottom:`1px solid ${c}`,fontFamily:"Courier New",background:x,width:"20px","@media (max-width: 480px)":{width:"10px"}}})]})}),e.jsx("tbody",{children:I.map((f,v)=>{console.log(`ü©π Rendering row for ${f.symbol}`);let F;if(typeof f.buyPrice=="number"?F=f.buyPrice:Array.isArray(f.historicalData)&&f.historicalData.length>0?F=f.historicalData[0].price:typeof f.currentPrice=="number"&&(F=f.currentPrice),!f.historicalData||f.historicalData.length===0)return null;if(typeof F>"u"||!f.buyDate||!f.historicalData||!Array.isArray(f.historicalData)||f.historicalData.length===0)return console.warn(`‚ö†Ô∏è Invalid ticker data for ${f.symbol}. Skipping row.`,f),null;const H=f.buyDate&&new Date(f.buyDate).toString()!=="Invalid Date"?f.buyDate:null;console.log(`üîç [TickerTable] Calling getSlicedData for ${f.symbol}:`,{historicalDataLength:f.historicalData?.length,selectedTimeframe:l,validBuyDate:H,buyPrice:f.buyPrice});const{startPoint:Y,endPoint:P}=it(f.historicalData,l,H,f.symbol,f.buyPrice);let K=0,b=f.buyPrice;Y&&P&&typeof Y.price=="number"&&typeof P.price=="number"&&Y.price>0&&(K=(P.price-Y.price)/Y.price*100,b=Y.price,console.log(`[Table %] ${f.symbol}: startPoint: ${Y.price}, endPoint: ${P.price}, changePercent: ${K}%`),console.log(`[Table Price] ${f.symbol}: lookedUpBuyPrice: ${b}`));const V=t.findIndex(W=>W.symbol===f.symbol&&W.buyDate===f.buyDate&&W.buyPrice===f.buyPrice);return e.jsx($n,{item:{...f},index:V,editMode:n,handleChangeSymbol:r,handleBuyPriceChange:typeof i=="function"?i:void 0,handleBuyDateChange:typeof a=="function"?a:void 0,handleDelete:typeof s=="function"?s:void 0,handleRefreshPrice:typeof p=="function"?p:void 0,items:t,selectedTimeframe:l,changePercent:K,lookedUpBuyPrice:b},`${f.symbol}-${V}`)})})]})})},Ft=De.memo(Wn);function Ye(t){return typeof t!="string"?"":t.trim().toUpperCase().replace(/\s+/g,"")}function nt(t){const n=Ye(t);return/^#?\w{1,10}$/.test(n)}async function Bn(t,n="real",r=null,i=null){if(!t||typeof t!="string")return console.error("‚ùå createTicker: Invalid symbol provided:",t),null;t=Ye(t);const a=new Date().toISOString();try{if(n==="mock"||t.startsWith("#")){const c=Ue({numTickers:1}).items[0];c.symbol=t;const x=c.historicalData?.[0]??{price:100,timestamp:a},d=Number(r??x.price??0),u=i??x.timestamp;(!c.historicalData||c.historicalData.length===0)&&(c.historicalData=[{price:isNaN(Number(d))?0:Number(d),timestamp:u}]);const y={symbol:c.symbol,buyPrice:d,buyDate:u,historicalData:Array.isArray(c.historicalData)?c.historicalData:[c.historicalData],addedAt:a,type:"mock",isMock:!0};console.log("‚úÖ createTicker returning mock:",y),console.log("üì¶ Before normalization (mock):",y);const T=Ve(y);return console.log("‚úÖ After normalization (mock):",T),T}const s=await at(t);if(!s||typeof s!="object"||!s.symbol||!s.historicalData)return console.warn(`‚ö†Ô∏è Skipping ${t}: malformed ticker object`,s),null;if(r!==null&&!isNaN(Number(r)))s.buyPrice=Number(r),console.log(`üí∞ Using custom buy price for ${t}: $${s.buyPrice}`);else{const l=s.historicalData[s.historicalData.length-1];s.buyPrice=l.price,console.log(`üí∞ Using current market price as buy price for ${t}: $${s.buyPrice} (this will stay fixed)`)}if(i&&!isNaN(Date.parse(i)))s.buyDate=i,console.log(`üìÖ Using custom buy date for ${t}: ${s.buyDate}`);else{const l=s.historicalData[s.historicalData.length-1];s.buyDate=l.timestamp,console.log(`üìÖ Using current market date as buy date for ${t}: ${s.buyDate} (this will stay fixed)`)}if(r!==null&&!isNaN(Number(r))||i&&!isNaN(Date.parse(i))){const l={price:s.buyPrice,timestamp:s.buyDate},c=s.historicalData[s.historicalData.length-1];s.historicalData=[l,c],console.log(`üìä Created 2-point historical data for ${t}:`,s.historicalData)}s.addedAt=a,s.type="real",s.isMock=!1;const p=Ve(s);return console.log("‚úÖ createTicker returning real:",p),p}catch(s){return console.error(`‚ùå createTicker failed for ${t}:`,s),null}}const On="rgb(140,185,162)",Mn=({bulkSymbols:t,setBulkSymbols:n,handleBulkAdd:r,buyDate:i,setBuyDate:a,buyPrice:s,setBuyPrice:p,setWatchlists:l,editMode:c,watchlists:x,setNotification:d,setNotificationType:u})=>{const[y,T]=h.useState(!1),[I,$]=h.useState(""),[f,v]=h.useState(""),[F,H]=h.useState(!1),Y=h.useRef(),P=J(On),K=J("black"),b=()=>{if(!t.trim())return v(""),!1;const W=t.split(/[,	\s]+/).map(B=>B.trim().toUpperCase()).filter(Boolean);if(W.length===0)return v("Please enter valid ticker symbols."),!1;const M=W.filter(B=>!nt(B));if(M.length>0)return v(`Invalid symbols: ${M.join(", ")}`),!1;if(c){if(s!==null&&(isNaN(s)||s<=0))return v("Buy price must be a positive number."),!1;if(i&&isNaN(Date.parse(i)))return v("Please enter a valid buy date."),!1}return v(""),!0};h.useEffect(()=>{f&&d&&u&&(d(f),u("error"))},[f,d,u]),h.useEffect(()=>(Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{b()},300),()=>{Y.current&&clearTimeout(Y.current)}),[t,s,i,c,F]);const V=async()=>{if(H(!0),!!b()){T(!0),$("");try{const M=t.split(/[,\s]+/).map(k=>k.trim().toUpperCase()).filter(Boolean).filter(nt),B=window.location.pathname.split("/").pop(),X=x&&Object.values(x).find(k=>k.slug===B)?.items||[],D=new Set(X.map(k=>k.symbol)),S=M.find(k=>D.has(k));if(S){d&&u&&(d(`Ticker '${S}' already exists in this watchlist`),u("error")),T(!1);return}console.log("üì¶ Adding Tickers:",t),console.log("üìÖ With Buy Date:",i),console.log("üíµ With Buy Price:",s);const z=[];for(const k of M){const E=Ye(k);if(D.has(E)){console.warn(`‚ö†Ô∏è Skipping duplicate symbol: ${E}`);continue}const G=c&&typeof s=="number"&&!isNaN(s)?s:void 0,te=!c&&!G,re=c&&i?i:void 0,se=await Bn(E,E.startsWith("#")?"mock":"real",G,re);if(!se){console.warn(`‚ùå createTicker returned null for symbol: ${E}`);continue}if(te&&se?.historicalData?.[0]?.price&&(se.buyPrice=Number(se.historicalData[0].price)),typeof se.buyPrice!="number"||se.buyPrice===0){console.warn(`‚ùå Skipping ${E}: buyPrice is still 0 after fetch.`);continue}se?(console.log("üîç Created item buyPrice check:",se.symbol,se.buyPrice),z.push(se)):console.warn("‚ùå Failed to create ticker:",E)}if(z.length===0){d&&u&&(d("No valid tickers were added, check your input"),u("error"));return}if(typeof l=="function"){const k={...x};for(const E in k)k[E].slug===B&&(k[E]={...k[E],items:[...k[E].items||[],...z.map(G=>({...G,buyPrice:typeof G.buyPrice=="number"?G.buyPrice:0}))]},console.log("üîç Pre-setWatchlists buyPrices:",k[E].items.map(G=>({symbol:G.symbol,buyPrice:G.buyPrice}))));try{localStorage.setItem("burnlist_watchlists",JSON.stringify(k))}catch(E){console.error("‚ùå Failed to save to localStorage:",E),$("Failed to save to storage. Please try again.");return}if(!k||typeof k!="object"){console.error("‚ùå updatedObject is invalid before calling setWatchlists"),$("Failed to update watchlists. Please try again.");return}else console.log("‚úÖ Final watchlist structure before setWatchlists:",k),l(k)}for(const k of z)(!k.buyDate||isNaN(new Date(k.buyDate)))&&console.error("‚ùå Invalid buyDate in item:",k);typeof r=="function"?(console.log("üß™ Calling handleBulkAdd with:",z),r(z)):console.warn("‚ö†Ô∏è handleBulkAdd is not a function"),n(""),p(null),a(null)}catch{d&&u&&(d("Failed to add tickers. Please try again."),u("error"))}finally{T(!1)}}};return e.jsx("div",{style:{marginTop:20,"@media (max-width: 768px)":{marginTop:16},"@media (max-width: 480px)":{marginTop:12}},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"8px","@media (max-width: 480px)":{flexDirection:"column",alignItems:"stretch",gap:"12px"}},children:[e.jsx("textarea",{value:t,onChange:W=>n(W.target.value),placeholder:"e.g. SPY, QQQ",rows:1,style:{flex:1,fontFamily:"'Courier New', Courier, monospace",fontSize:"0.9rem",backgroundColor:K,border:`1px solid ${P}`,color:P,padding:6,resize:"none",boxSizing:"border-box",cursor:"pointer",minWidth:0,minHeight:"32px","@media (max-width: 480px)":{fontSize:"14px",padding:"8px",width:"100%"}},onKeyDown:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),V())},onBlur:()=>H(!0)}),c&&e.jsx("input",{type:"number",placeholder:"Buy Price",step:"0.01",value:s||"",onChange:W=>{const M=parseFloat(W.target.value);p(M)},style:{marginLeft:8,fontFamily:"'Courier New', Courier, monospace",fontSize:"0.9rem",backgroundColor:K,border:`1px solid ${P}`,color:P,padding:6,cursor:"pointer",minWidth:0,minHeight:"32px","@media (max-width: 480px)":{marginLeft:0,fontSize:"14px",padding:"8px",width:"100%"}}}),c&&e.jsx("input",{type:"date",value:i||"",onChange:W=>{const M=W.target.value;a(M)},style:{marginLeft:8,fontFamily:"'Courier New', Courier, monospace",fontSize:"0.9rem",backgroundColor:K,border:`1px solid ${P}`,color:P,padding:6,cursor:"pointer",minWidth:0,minHeight:"32px","@media (max-width: 480px)":{marginLeft:0,fontSize:"14px",padding:"8px",width:"100%"}}}),e.jsx(Z,{mobile:!1,onClick:V,disabled:y,title:"Add ticker(s)",style:{marginLeft:8,backgroundColor:y?"#666666":P,color:"black",opacity:y?.6:1,minWidth:0,height:"32px",minHeight:"32px",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 16px",transition:"all 0.2s ease-in-out","@media (max-width: 480px)":{marginLeft:0,width:"100%",fontSize:"14px",padding:"8px 16px",height:"32px",minHeight:"32px"}},children:y?"...":"+++"})]})})},Ln="rgb(140,185,162)",Hn=({editMode:t,setEditMode:n})=>{const r=J(Ln);return J("black"),e.jsx("div",{style:{marginTop:0,textAlign:"right"},children:e.jsx(Z,{onClick:()=>n(!t),style:{background:"transparent",color:r,border:`1px solid ${r}`,fontFamily:"'Courier New', monospace",textTransform:"lowercase",fontWeight:400,letterSpacing:1,margin:0,boxShadow:"none",borderRadius:2,fontSize:15},children:t?"done":"edit"})})},_n="rgb(140,185,162)",Un=({children:t,height:n=400,style:r={}})=>{const i=J(_n),a=J("black");return e.jsx("div",{style:{width:"100%",height:n,border:`1px solid ${i}`,background:a,position:"relative",overflow:"hidden",touchAction:"pan-x pan-y","@media (max-width: 768px)":{height:Math.min(n,350)},"@media (max-width: 480px)":{height:Math.min(n,250)},...r},children:e.jsx("div",{style:{width:"100%",height:"100%",position:"relative",overflow:"auto",WebkitOverflowScrolling:"touch"},children:t})})};function Vn(t){if(!Array.isArray(t)||t.length===0)return{averagePrice:0,totalValue:0,itemCount:0,priceRange:{min:0,max:0},dateRange:{earliest:null,latest:null}};const n=t.filter(d=>d&&Number(d.buyPrice)>0&&d.buyDate&&Array.isArray(d.historicalData)&&d.historicalData.length>0);if(n.length===0)return{averagePrice:0,totalValue:0,itemCount:0,priceRange:{min:0,max:0},dateRange:{earliest:null,latest:null}};const r=n.flatMap(d=>d.historicalData.map(u=>new Date(u.timestamp)));new Date(Math.max(...r));const i=n.map(d=>{const u=new Date(d.buyDate),y=Number(d.buyPrice);let T=y;const I=[...d.historicalData].sort(($,f)=>new Date(f.timestamp)-new Date($.timestamp));return I.length>0&&(T=Number(I[0].price)),{symbol:d.symbol,buyPrice:y,buyDate:u,currentPrice:T,normalizedPrice:T,priceChange:T-y,priceChangePercent:(T-y)/y*100}}),a=i.reduce((d,u)=>d+u.currentPrice,0),s=a/i.length,p=i.map(d=>d.currentPrice),l={min:Math.min(...p),max:Math.max(...p)},c=n.map(d=>new Date(d.buyDate)),x={earliest:new Date(Math.min(...c)),latest:new Date(Math.max(...c))};return{averagePrice:Number(s.toFixed(2)),totalValue:Number(a.toFixed(2)),itemCount:n.length,priceRange:l,dateRange:x,normalizedPrices:i,totalBuyValue:i.reduce((d,u)=>d+u.buyPrice,0),totalGainLoss:i.reduce((d,u)=>d+u.priceChange,0),averageGainLossPercent:i.reduce((d,u)=>d+u.priceChangePercent,0)/i.length}}function Jn(t){if(!Array.isArray(t)||t.length===0)return{twap:0,weightedPrices:[]};const n=t.filter(l=>l&&Number(l.buyPrice)>0&&l.buyDate);if(n.length===0)return{twap:0,weightedPrices:[]};const r=new Date,i=n.map(l=>{const c=new Date(l.buyDate),x=(r-c)/(1e3*60*60*24),d=Math.max(1,x);return{symbol:l.symbol,buyPrice:Number(l.buyPrice),buyDate:c,weight:d,weightedPrice:Number(l.buyPrice)*d}}),a=i.reduce((l,c)=>l+c.weightedPrice,0),s=i.reduce((l,c)=>l+c.weight,0),p=s>0?a/s:0;return{twap:Number(p.toFixed(2)),weightedPrices:i}}function qn(t,n="D"){if(!Array.isArray(t)||t.length===0)return{beta:0,confidence:0,marketCorrelation:0};const r=t.filter(i=>i&&Array.isArray(i.historicalData)&&i.historicalData.length>0);if(r.length===0)return{beta:0,confidence:0,marketCorrelation:0};try{const i=r.map(u=>{const y=[...u.historicalData].sort((f,v)=>new Date(f.timestamp)-new Date(v.timestamp));if(y.length<2)return null;let T=[];const $={D:1,W:7,M:30,Y:365}[n]||1;for(let f=$;f<y.length;f++){const v=Number(y[f].price),F=Number(y[f-$].price);if(F>0){const H=(v-F)/F*100;T.push(H)}}return{symbol:u.symbol,returns:T,avgReturn:T.length>0?T.reduce((f,v)=>f+v,0)/T.length:0,volatility:T.length>0?Math.sqrt(T.reduce((f,v)=>f+Math.pow(v-T.reduce((F,H)=>F+H,0)/T.length,2),0)/T.length):0}}).filter(u=>u!==null);if(i.length===0)return{beta:0,confidence:0,marketCorrelation:0};const a=r.reduce((u,y)=>{const T=Number(y.historicalData[y.historicalData.length-1]?.price||0);return u+T},0),s=r.reduce((u,y,T)=>{const I=Number(y.historicalData[y.historicalData.length-1]?.price||0),$=a>0?I/a:0,f=i.find(v=>v.symbol===y.symbol);return u+$*(f?.volatility||0)},0),p=i.reduce((u,y)=>u+y.volatility,0)/i.length,l=p>0?s/p:1,c=i.reduce((u,y)=>u+y.returns.length,0)/i.length,x=Math.min(100,Math.max(0,c/30*100)),d=Math.min(1,Math.max(-1,l*.8));return{beta:Number(l.toFixed(2)),confidence:Number(x.toFixed(0)),marketCorrelation:Number(d.toFixed(2)),portfolioVolatility:Number(s.toFixed(2)),avgMarketVolatility:Number(p.toFixed(2))}}catch(i){return console.error("Error calculating portfolio beta:",i),{beta:0,confidence:0,marketCorrelation:0}}}const we="rgb(140,185,162)",Gn=t=>t>=90?"excellent":t>=75?"good":t>=50?"fair":t>=25?"poor":"unreliable";function Qn(){const t=new Date,n=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),r=n.getDay(),i=n.getHours(),a=n.getMinutes();return!(r===0||r===6||i<9||i===9&&a<30||i>16||i===16&&a>0)}const Kn=()=>{const{slug:t}=rt(),n=$e(),r=Fe(),[i,a]=h.useState("D"),[s,p]=h.useState(null),[l,c]=h.useState({}),[x,d]=h.useState(""),[u,y]=h.useState(null),[T,I]=h.useState(null),[$,f]=h.useState(!1),{notification:v,notificationType:F,setNotification:H,setNotificationType:Y}=Re(),[P,K]=h.useState(!1),{isInverted:b}=Ne(),V=h.useRef(!1),W=h.useRef(null),M=st(s?.items||[],i),B=Vn(s?.items||[]),X=Jn(s?.items||[]),D=qn(s?.items||[],i),S=Array.isArray(s?.items)?s.items.filter(U=>U.type==="real"&&!U.isMock).length:0;h.useRef(null);const z=async(U=!1,g=!1)=>{if(!s||!Array.isArray(s.items))return;const w=await fe.startFetch(t,s.items,(L,C)=>{const A={...s,items:L},O=Object.keys(l).find(_=>l[_].slug===t);if(O){const _={...l,[O]:A};te(_)}},U,g);w.success?localStorage.setItem(`burnlist_last_refresh_${t}`,new Date().toISOString()):w.message&&(H(w.message),Y("info"))},k=fe.getFetchStatus(t),E=k&&k.status==="active",G=async()=>{if(E)fe.cancelFetch(t),H("Fetch cancelled","info");else{if(!Qn()&&!V.current){H("Market is closed. Click again to force refresh."),Y("error"),V.current=!0,W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{V.current=!1},5e3);return}const U=V.current;V.current=!1,await z(!0,U)}};h.useEffect(()=>{try{const U=localStorage.getItem("burnlist_watchlists");if(U)try{const g=JSON.parse(U);c(g);const w=Object.values(g).find(L=>L.slug===t);w&&(w.items=w.items?.map(Ve),w.items=w.items?.filter(L=>{const C=L&&Number(L.buyPrice)>0&&Array.isArray(L.historicalData)&&Number(L.historicalData[0]?.price)>0;return C||console.warn("üß® Invalid item detected during hydration:",L),C})),p(w||null)}catch{localStorage.removeItem("burnlist_watchlists"),p(null)}}catch{p(null)}},[t]),h.useEffect(()=>()=>{fe.pauseFetch(t)},[t]),h.useEffect(()=>{f(!0);const U=setTimeout(()=>f(!1),350);return()=>clearTimeout(U)},[i,s]);const te=U=>{if(!(!U||typeof U!="object"||Array.isArray(U)))try{const g=Object.values(U).find(L=>L.slug===t);g&&p(g);const w=JSON.stringify(U);localStorage.setItem("burnlist_watchlists",w),c(U)}catch{}},re=(U,g)=>{p(w=>{if(!w||!Array.isArray(w.items))return w;const L=w.items.map((A,O)=>O===U?{...A,buyPrice:g}:A),C={...w,items:L};return c(A=>{const O=Object.keys(A).find(Q=>A[Q].slug===t);if(!O)return A;const _={...A,[O]:C};return localStorage.setItem("burnlist_watchlists",JSON.stringify(_)),_}),C})},se=(U,g)=>{const w=new Date().toISOString().slice(0,10);g>w||p(L=>{if(!L||!Array.isArray(L.items))return L;const C=L.items.map((O,_)=>_===U?{...O,buyDate:g}:O),A={...L,items:C};return c(O=>{const _=Object.keys(O).find(le=>O[le].slug===t);if(!_)return O;const Q={...O,[_]:A};return localStorage.setItem("burnlist_watchlists",JSON.stringify(Q)),Q}),A})},ie=async U=>{if(!s||!Array.isArray(s.items))return;const g=s.items[U];if(!g||!g.symbol||!g.buyDate){console.warn("Cannot refresh: missing symbol or buy date");return}try{console.log(`üîÑ Refreshing price for ${g.symbol} at date ${g.buyDate}`);let w=g.historicalData||[];if(w.length===0){console.log(`üì° No existing historical data for ${g.symbol}, fetching from API...`);const{fetchQuote:_}=await Dn(async()=>{const{fetchQuote:le}=await Promise.resolve().then(()=>mn);return{fetchQuote:le}},void 0),Q=await _(g.symbol);Q&&Q.historicalData&&(w=Q.historicalData)}if(w.length===0){console.warn(`No historical data found for ${g.symbol}`);return}const L=new Date(g.buyDate);let C=null,A=null,O=1/0;for(const _ of w){const Q=new Date(_.timestamp);if(Q.toDateString()===L.toDateString()){C=_.price,A=_.timestamp,console.log(`‚úÖ Found exact date match for ${g.symbol}: ${C} at ${A}`);break}const le=Math.abs(Q-L);le<O&&(O=le,C=_.price,A=_.timestamp)}if(C===null){console.warn(`No historical price found for ${g.symbol} at ${g.buyDate}`);return}console.log(`üìä Updating ${g.symbol} buy price from ${g.buyPrice} to ${C} (date: ${A})`),p(_=>{if(!_||!Array.isArray(_.items))return _;const Q=_.items.map((ee,ne)=>ne===U?{...ee,buyPrice:C}:ee),le={..._,items:Q};return c(ee=>{const ne=Object.keys(ee).find(pe=>ee[pe].slug===t);if(!ne)return ee;const Ce={...ee,[ne]:le};return localStorage.setItem("burnlist_watchlists",JSON.stringify(Ce)),Ce}),le}),H(`${g.symbol} buy price updated to ${C.toFixed(2)}`),H(`Refreshed ${g.symbol} price`,"success")}catch(w){console.error(`Error refreshing ${g.symbol}:`,w),H(`Failed to refresh ${g.symbol}`,"error")}},ye=U=>{p(g=>{if(!g||!Array.isArray(g.items))return g;const w=g.items.filter((C,A)=>A!==U),L={...g,items:w};return c(C=>{const A=Object.keys(C).find(_=>C[_].slug===t);if(!A)return C;const O={...C,[A]:L};return localStorage.setItem("burnlist_watchlists",JSON.stringify(O)),O}),L})};return s?e.jsxs("div",{style:{backgroundColor:b?"rgb(140,185,162)":"transparent",minHeight:"100vh",color:b?"#000000":"#ffffff",padding:"0","@media (max-width: 768px)":{padding:"0",paddingBottom:"80px"},"@media (max-width: 480px)":{paddingBottom:"80px"}},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",borderBottom:`1px solid ${we}`,background:"rgba(0,0,0,0.3)",gap:"10px",marginBottom:"20px"},children:[e.jsx(Z,{onClick:()=>n("/universes"),style:{background:r.pathname==="/universes"||r.pathname.startsWith("/universe/")?we:"transparent",color:r.pathname==="/universes"||r.pathname.startsWith("/universe/")?"#000000":we,border:`1px solid ${we}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"UNIVERSE"}),e.jsx(Z,{onClick:()=>n("/journal"),style:{background:r.pathname==="/journal"?we:"transparent",color:r.pathname==="/journal"?"#000000":we,border:`1px solid ${we}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"JOURNAL"}),e.jsx(Z,{onClick:()=>n("/"),style:{background:r.pathname==="/"||r.pathname.startsWith("/burn/")?we:"transparent",color:r.pathname==="/"||r.pathname.startsWith("/burn/")?"#000000":we,border:`1px solid ${we}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"BURNPAGE"})]}),B&&B.averagePrice>0&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:10002,backgroundColor:"rgba(0,0,0,0.9)",borderBottom:`2px solid ${we}`,padding:"8px 20px","@media (max-width: 768px)":{padding:"6px 16px"},"@media (max-width: 480px)":{padding:"4px 12px"}},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"15px",fontFamily:"'Courier New', monospace",fontSize:"14px",color:we,"@media (max-width: 768px)":{fontSize:"12px",gap:"10px"},"@media (max-width: 480px)":{fontSize:"11px",gap:"8px",flexDirection:"column",alignItems:"center"}},children:[e.jsxs("div",{style:{fontWeight:"bold"},children:["ETF Price: $",B.averagePrice.toFixed(2)]}),e.jsxs("div",{style:{color:"#888"},children:["Beta: ",D.beta," (",Gn(D.confidence),")"]}),e.jsxs("div",{style:{color:"#888"},children:[Number.isFinite(M)?`${M.toFixed(2)}%`:"‚Äì%"," (",i?.toUpperCase()||"N/A",")"]}),e.jsxs("div",{style:{color:B.totalGainLoss>=0?we:"#e31507",fontWeight:"bold"},children:["P&L: $",B.totalGainLoss.toFixed(2)," (",B.averageGainLossPercent.toFixed(2),"%)"]})]})}),v&&e.jsx("div",{style:{position:"fixed",top:B&&B.averagePrice>0?60:24,left:0,right:0,zIndex:10001,display:"flex",justifyContent:"center",pointerEvents:"none","@media (max-width: 480px)":{top:B&&B.averagePrice>0?50:12}},children:e.jsx("div",{style:{minWidth:320,maxWidth:480,pointerEvents:"auto","@media (max-width: 480px)":{minWidth:"90vw",maxWidth:"90vw"}},children:e.jsx(ve,{message:v,type:F,onClose:()=>H("")})})}),e.jsx("div",{style:{padding:"20px 20px 0 20px",marginBottom:"50px",marginTop:B&&B.averagePrice>0?"50px":"0px","@media (max-width: 768px)":{padding:"16px 16px 0 16px",marginBottom:"60px",marginTop:B&&B.averagePrice>0?"45px":"0px"},"@media (max-width: 480px)":{padding:"12px 12px 0 12px",marginBottom:"40px",marginTop:B&&B.averagePrice>0?"40px":"0px"}},children:e.jsx(Tt,{name:s.name,averageReturn:M,selected:i,notification:$?"Calculating returns and updating chart...":null,onNotificationClose:()=>f(!1),onRefresh:G,realStockCount:S,etfPriceData:B,twapData:X})}),e.jsxs("div",{style:{padding:"5px 20px 10px 20px","@media (max-width: 768px)":{padding:"4px 16px 8px 16px"},"@media (max-width: 480px)":{padding:"3px 12px 6px 12px"}},children:[e.jsx(Un,{height:505,style:{"@media (max-width: 768px)":{height:"calc(49.5vw / 2 - 5px)",width:"100vw",marginLeft:"-16px",marginRight:"-16px"},"@media (max-width: 480px)":{height:"calc(49.5vw / 2 - 5px)",width:"100vw",marginLeft:"-12px",marginRight:"-12px"}},children:e.jsx(ot,{portfolioReturnData:s.items?.map(U=>({symbol:U.symbol,buyDate:U.buyDate,buyPrice:U.buyPrice,historicalData:U.historicalData,timeframe:i}))||[],showBacktestLine:!1,height:500,suppressEmptyMessage:!0})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10,flexWrap:"wrap",gap:"8px","@media (max-width: 480px)":{flexDirection:"column",alignItems:"stretch",gap:"12px"}},children:[e.jsx(Pt,{selected:i,onChange:a}),e.jsx(Hn,{editMode:P,setEditMode:K})]}),Array.isArray(s.items)&&s.items.length>0?e.jsx(Ft,{items:s.items,selectedTimeframe:i,editMode:P,handleBuyPriceChange:re,handleBuyDateChange:se,handleDelete:ye,handleRefreshPrice:ie}):null,(!Array.isArray(s.items)||s.items.length===0)&&e.jsx("div",{style:{fontFamily:"'Courier New', monospace",color:"#999",textAlign:"center",marginTop:"20px","@media (max-width: 480px)":{marginTop:"16px",fontSize:"14px"}},children:"‚ö†Ô∏è No valid data to display yet."}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px","@media (max-width: 768px)":{marginTop:"24px"},"@media (max-width: 480px)":{marginTop:"20px"}},children:e.jsx(Mn,{watchlists:l,setWatchlists:te,currentSlug:t,bulkSymbols:x,setBulkSymbols:d,buyPrice:u,setBuyPrice:y,buyDate:T,setBuyDate:I,setNotification:H,setNotificationType:Y,handleBulkAdd:async U=>{if(!(!U||U.length===0))try{const g=localStorage.getItem("burnlist_watchlists");if(!g||g==="undefined")return;const w=JSON.parse(g),L=t,C=Object.values(w).find(ne=>ne.slug===L);if(!C||!Array.isArray(C.items))return;const A=U.filter(ne=>ne&&ne.symbol&&typeof ne.symbol=="string"&&Array.isArray(ne.historicalData)),O=new Set((C.items||[]).map(ne=>ne.symbol)),Q=A.filter(ne=>!O.has(ne.symbol)).filter(ne=>Array.isArray(ne.historicalData)&&ne.historicalData.length>0);C.items.push(...Q);const le={...w},ee=Object.keys(le).find(ne=>le[ne].slug===L);if(ee)le[ee]=C;else return;localStorage.setItem("burnlist_watchlists",JSON.stringify(le)),c(le)}catch{}}})})]})]}):e.jsx("div",{style:{backgroundColor:b?"rgb(140,185,162)":"#000000",color:b?"#000000":"#ffffff",padding:"20px"},children:e.jsx("h2",{style:{color:"#e31507",fontFamily:"'Courier New', monospace"},children:"‚ö†Ô∏è Watchlist not found."})})},ft="burnlist_mock_watchlist",Yn=()=>{const[t,n]=h.useState("D"),[r,i]=h.useState(null),{isInverted:a}=Ne();h.useEffect(()=>{let p=null;try{p=JSON.parse(localStorage.getItem(ft))}catch{p=null}if(p&&p.items&&Array.isArray(p.items)&&p.items.length>0)i(p);else{const l=Ue({numTickers:4,days:130,pointsPerDay:25});i(l),localStorage.setItem(ft,JSON.stringify(l))}},[]);const s=st(r?.items||[],t);return r?e.jsxs("div",{style:{backgroundColor:a?"rgb(140,185,162)":"black",minHeight:"100vh",color:a?"#000000":"#FFA500"},children:[e.jsx("div",{style:{background:"#FFA500",color:"black",fontWeight:"bold",textAlign:"center",padding:"12px 0",fontFamily:"Courier New",letterSpacing:2},children:"DEV MODE: MOCK WATCHLIST (ORANGE = DEV)"}),e.jsx("div",{style:{padding:"20px 20px 0 20px",marginBottom:"100px"},children:e.jsx(Tt,{name:r.name,averageReturn:s,selected:t,color:"#FFA500"})}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsx(ot,{portfolioReturnData:r.items.map(p=>({symbol:p.symbol,buyDate:p.buyDate,historicalData:p.historicalData,timeframe:t})),showBacktestLine:!1,height:500,lineColor:"#FFA500"}),e.jsx(Pt,{selected:t,onChange:n,color:"#FFA500"}),Array.isArray(r.items)&&r.items.length>0?e.jsx("div",{style:{maxWidth:900,margin:"40px auto 0 auto"},children:e.jsx(Ft,{items:r.items,selectedTimeframe:t,color:"#FFA500"})}):e.jsx("div",{style:{fontFamily:"Courier New, monospace",color:"#999",textAlign:"center",marginTop:"20px"},children:"‚ö†Ô∏è No valid data to display yet."})]})]}):e.jsx("div",{style:{color:"#FFA500",background:a?"rgb(140,185,162)":"black",padding:40,fontFamily:"Courier New"},children:"Loading mock watchlist..."})};function Ie(t,n,r){return t<=n?0:t>=r?100:(t-n)/(r-n)*100}function Xn(t){return t<=15?100:t<=30?70:t<=50?40:0}function Zn(t){return t>=1.2&&t<=2.5?100:50}function er({epsGrowth:t,avgVolume:n,relVolume:r,technicalFlags:i,earningsDaysAway:a,price:s,pe:p,marketCap:l,beta:c,newsFlag:x,sectorAlignment:d,marketSupport:u,volatilityClear:y,breadthHealthy:T}={}){let I=0,$=0;t!=null&&t!==""&&(I+=Ie(t,0,50)*.15,$+=.15),n!=null&&n!==""&&(I+=Ie(n,5e5,2e6)*.12,$+=.12),r!=null&&r!==""&&(I+=Ie(r,1,3)*.1,$+=.1),i!=null&&(I+=(i?100:0)*.1,$+=.1),a!=null&&a!==""&&(I+=(a>5?100:0)*.1,$+=.1),s!=null&&s!==""&&(I+=Ie(s,7,50)*.08,$+=.08),p!=null&&p!==""&&(I+=Xn(p)*.08,$+=.08),l!=null&&l!==""&&(I+=Ie(l,5e8,5e10)*.07,$+=.07),c!=null&&c!==""&&(I+=Zn(c)*.05,$+=.05),x!=null&&(I+=(x?100:0)*.02,$+=.02);const f=$>0?I*(70/(100*$)):0;let v=0;d&&(v+=10),u&&(v+=10),y&&(v+=5),T&&(v+=5);const F=f+v;let H="Standby";return F>=90?H="Prime Entry":F>=75&&(H="Almost Ready"),{coreSetupScore:Math.round(f*100)/100,contextScore:v,totalBuyScore:Math.round(F*100)/100,tag:H}}var $t={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yt=De.createContext&&De.createContext($t),tr=["attr","size","title"];function nr(t,n){if(t==null)return{};var r=rr(t,n),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function rr(t,n){if(t==null)return{};var r={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(n.indexOf(i)>=0)continue;r[i]=t[i]}return r}function Ge(){return Ge=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ge.apply(this,arguments)}function bt(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,i)}return r}function Qe(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?bt(Object(r),!0).forEach(function(i){ir(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function ir(t,n,r){return n=or(n),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function or(t){var n=ar(t,"string");return typeof n=="symbol"?n:n+""}function ar(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function Et(t){return t&&t.map((n,r)=>De.createElement(n.tag,Qe({key:r},n.attr),Et(n.child)))}function sr(t){return n=>De.createElement(lr,Ge({attr:Qe({},t.attr)},n),Et(t.child))}function lr(t){var n=r=>{var{attr:i,size:a,title:s}=t,p=nr(t,tr),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),De.createElement("svg",Ge({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,p,{className:c,style:Qe(Qe({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&De.createElement("title",null,s),t.children)};return yt!==void 0?De.createElement(yt.Consumer,null,r=>n(r)):n($t)}function cr(t){return sr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}const Be="/assets/greenflag-BcWhcZdx.png",He="/assets/redflag-DW5QesGB.png",dr="/assets/yellowflag-BVDadLB5.png",wt="/assets/box-BER_scjZ.png",St="/assets/checkbox-BVlAGvim.png",j="rgb(140,185,162)",ge={breakout:{name:"Breakout",checklists:["Horizontal resistance tested at least 2‚Äì3 times","Tight consolidation range (3‚Äì7 bars) near resistance","No overlapping wicks or indecision candles near breakout zone","Volume increasing into resistance (1-day Relative Volume > 1.5)","RSI between 50‚Äì65 and rising","MACD bullish crossover or trending upward","Price within 5% of 52-week high","No major macro event or earnings within next 7 days","Clean air above breakout level (no nearby supply)"],newsValidation:["Catalyst present in last 3 days (e.g. earnings beat, analyst upgrade, sector momentum)","Headline or PR confirms why price is reacting","Price action matches news intensity (no fade after news)"]},pullback:{name:"Pullback",checklists:["Strong uptrend visible on daily chart","Pullback to support (20 EMA, 50 SMA, or breakout retest)","Low volume during the pullback vs prior rally","Candle structure is clean (no breakdown bars or gaps)","Reversal signal forming (hammer, engulfing, inside bar)","RSI between 35‚Äì50, curling up","MACD flattening or turning bullish","Relative Volume (3‚Äì5 day avg) > 1.2","No earnings within next 5 days","Pullback has not broken prior swing low"],newsValidation:["Recent catalyst (earnings, analyst note, macro driver) caused last rally","Catalyst is still relevant (not priced in / not reversed)","If no news, chart structure alone justifies trade"]},shortSqueeze:{name:"Short Squeeze",checklists:["Wide-range breakout candle on high volume","Gap + hold or strong Day 1/Day 2 continuation behavior","Relative Volume (1-day) > 2.0","Beta > 2.0 or Volatility > 4%","RSI between 55‚Äì70 (not overbought)","MACD trending upward or freshly crossed","High short float (20%+) confirmed externally (Finviz, Fintel, etc.)","Small float or prior squeeze chart behavior","Room above ‚Äî no major resistance overhead"],newsValidation:["Confirmed event or sentiment driver (e.g. earnings beat, activist, insider buys)","Headline present within last 3 days","If no news: verify price is moving *only* due to float pressure (pure squeeze logic)"]},postEarnings:{name:"Post-Earnings Momentum",checklists:["Earnings occurred within last 3 trading days","Large green candle on earnings day with strong close","Price gapped up and held or built above 20 EMA","Day 2 or Day 3 shows continuation or controlled pullback","Relative Volume (1‚Äì3 day avg) > 1.5","RSI between 55‚Äì70","MACD bullish","No major macro interference (Fed, CPI, etc.) within 3 days","Target zone has room for extension (no hard resistance above)"],newsValidation:["Confirm earnings beat ‚Äî look for revenue + EPS beat and guidance raise","Check press release or SA earnings summary","Ensure market reaction aligns with numbers (not a fake pump)"]}},pr=(t,n,r,i)=>{const a=r*(i/100),s=3.5,p=1.25*n,l=Math.min(t*(s/100),p),c=t-l,x=t+2*l,d=a/l;return{stopLoss:Number(c.toFixed(5)),takeProfit:Number(x.toFixed(5)),positionSize:Number(d.toFixed(5))}},ur=()=>{const{slug:t}=rt(),n=$e(),r=Fe(),[i,a]=h.useState(null),[s,p]=h.useState({}),[l,c]=h.useState(""),{notification:x,notificationType:d,setNotification:u,setNotificationType:y}=Re(),[T,I]=h.useState(!1),[$,f]=h.useState(new Set),[v,F]=h.useState({key:"symbol",direction:"asc"}),[H,Y]=h.useState(()=>{const o=localStorage.getItem("burnlist_screener_settings");return o?JSON.parse(o):{accountSize:1e4,riskPercent:2}}),{isInverted:P}=Ne(),[K,b]=h.useState(!1),[V,W]=h.useState(null),[M,B]=h.useState(""),[X,D]=h.useState({}),[S,z]=h.useState(""),[k,E]=h.useState(""),[G,te]=h.useState(""),[re,se]=h.useState(""),[ie,ye]=h.useState("2"),[U,g]=h.useState(""),[w,L]=h.useState(!1),[C,A]=h.useState(new Set);h.useEffect(()=>{try{const o=localStorage.getItem("burnlist_universes");if(o){const N=JSON.parse(o);p(N);const m=Object.values(N).find(oe=>oe.slug===t);m&&a(m)}}catch(o){console.error("Failed to load universes:",o)}},[t]),h.useEffect(()=>{if(i){const o={...s},N=Object.keys(o).find(m=>o[m].id===i.id);N&&(o[N]=i,localStorage.setItem("burnlist_universes",JSON.stringify(o)))}},[i]),h.useEffect(()=>{localStorage.setItem("burnlist_screener_settings",JSON.stringify(H))},[H]);const O=async()=>{if(!l.trim()){u("Please enter ticker symbols"),y("error");return}I(!0),u("Adding tickers to universe..."),y("loading");try{const o=l.split(/[,	\s]+/).map(ae=>ae.trim().toUpperCase()).filter(Boolean).filter(nt);if(o.length===0){u("No valid ticker symbols found"),y("error");return}const N=new Set((i?.items||[]).map(ae=>ae.symbol)),m=o.filter(ae=>!N.has(ae));if(m.length===0){u("All symbols already exist in universe"),y("info");return}const oe=[];for(const ae of m){const de=Ye(ae),Se={id:_e(),symbol:de,lastPrice:0,atr:0,flags:{news:!1},tradeType:"",tradeTypeName:"",quickTradeType:"",quickTradeTypeName:"",journalVerdict:"",journalVerdictType:"",journalVerdictFlag:"",entryPrice:"",notes:"",stopLoss:"",takeProfit:"",positionSize:""};oe.push(Se)}a(ae=>({...ae,items:[...ae?.items||[],...oe]})),c(""),u(`Added ${oe.length} tickers to universe. You can now manually enter prices.`),y("success")}catch(o){console.error("Error adding tickers:",o),u("Failed to add tickers"),y("error")}finally{I(!1)}},_=(o,N,m)=>{a(oe=>({...oe,items:(oe?.items||[]).map(ae=>{if(ae.id===o){const de={...ae};if(N==="flags"?de.flags={...de.flags,...m}:de[N]=m,N==="entryPrice"||N==="atr"){const Se=N==="entryPrice"?parseFloat(m):de.entryPrice,ue=N==="atr"?parseFloat(m):de.atr;if(Se&&ue&&Se>0&&ue>0){const{stopLoss:be,takeProfit:Me,positionSize:Xe}=pr(Se,ue,H.accountSize,H.riskPercent);de.stopLoss=be.toFixed(2),de.takeProfit=Me.toFixed(2),de.positionSize=Xe.toFixed(2)}}return de}return ae})}))},Q=o=>{a(N=>({...N,items:(N?.items||[]).filter(m=>m.id!==o)})),f(N=>{const m=new Set(N);return m.delete(o),m}),A(N=>{const m=new Set(N);return m.delete(o),m})},le=()=>{$.size===(i?.items?.length||0)?f(new Set):f(new Set((i?.items||[]).map(o=>o.id)))},ee=o=>{A(N=>{const m=new Set(N);return m.has(o)?m.delete(o):m.add(o),m})},ne=()=>{C.size===(i?.items?.length||0)?A(new Set):A(new Set((i?.items||[]).map(o=>o.id)))},Ce=()=>{if($.size===0){u("Please select at least one ticker"),y("error");return}try{const o=(i?.items||[]).filter(ue=>$.has(ue.id)),N=JSON.parse(localStorage.getItem("burnlist_watchlists")||"{}"),m=_e(),oe=`Screener ${qe(new Date)}`,ae=oe.toLowerCase().replace(/[^a-z0-9]/g,"-"),de={id:m,name:oe,slug:ae,items:o.map(ue=>({symbol:ue.symbol,buyPrice:parseFloat(ue.entryPrice)||parseFloat(ue.lastPrice)||0,buyDate:new Date().toISOString(),historicalData:[{price:parseFloat(ue.entryPrice)||parseFloat(ue.lastPrice)||0,timestamp:new Date().toISOString()}],addedAt:new Date().toISOString(),type:"real",isMock:!1})),reason:`Created from screener with ${o.length} tickers`,createdAt:new Date().toISOString()},Se={...N,[m]:de};localStorage.setItem("burnlist_watchlists",JSON.stringify(Se)),u(`Created watchlist "${oe}" with ${o.length} tickers`),y("success"),f(new Set)}catch(o){console.error("Error creating watchlist:",o),u("Failed to create watchlist"),y("error")}},pe=o=>{F(N=>N.key===o?{key:o,direction:N.direction==="asc"?"desc":"asc"}:{key:o,direction:"asc"})},he=[...i?.items||[]].map(o=>{const N={epsGrowth:o.epsGrowth||0,avgVolume:o.avgVolume||0,relVolume:o.relVolume||1,technicalFlags:!!(o.tradeType&&o.journalVerdictType==="qualified"),earningsDaysAway:o.earningsDaysAway||10,price:o.lastPrice||0,pe:o.pe||15,marketCap:o.marketCap||5e8,debtEquity:o.debtEquity||.25,pb:o.pb||1.1,beta:o.beta||1.5,newsFlag:o.flags.news||!1,sectorAlignment:o.sectorAlignment||!1,marketSupport:o.marketSupport||!1,volatilityClear:o.volatilityClear||!1,breadthHealthy:o.breadthHealthy||!1},m=er(N);return{...o,_buyScore:m.totalBuyScore,_buyTag:m.tag}}).sort((o,N)=>{const m=(ue,be)=>be.includes(".")?be.split(".").reduce((Xe,Lt)=>Xe?.[Lt],ue):ue[be],oe=m(o,v.key),ae=m(N,v.key);if(v.key==="symbol"||v.key==="tradeType"||v.key==="quickTradeType"||v.key==="notes"||v.key==="journalVerdict"){const ue=String(oe||""),be=String(ae||"");return v.direction==="asc"?ue.localeCompare(be):be.localeCompare(ue)}if(v.key==="flags.news"){const ue=!!oe,be=!!ae;return ue===be?0:v.direction==="asc"?ue?1:-1:be?1:-1}const de=parseFloat(oe)||0,Se=parseFloat(ae)||0;return v.direction==="asc"?de-Se:Se-de}),ce=o=>v.key!==o?"":v.direction==="asc"?"‚Üë":"‚Üì",Te=()=>{if(!S||!k||!G)return null;const o=parseFloat(S),N=parseFloat(k),m=parseFloat(G);if(o<=0||N<=0||m<=0)return null;const oe=Math.abs(o-N),ae=Math.abs(m-o);return oe===0?null:(ae/oe).toFixed(2)},Ee=()=>{if(!re||!ie||!S||!k)return null;const o=parseFloat(re),N=parseFloat(ie)/100,m=parseFloat(S),oe=parseFloat(k);if(o<=0||N<=0||m<=0||oe<=0)return null;const ae=o*N,de=Math.abs(m-oe);return de===0?null:Math.floor(ae/de)},je=()=>{if(!M||Object.keys(X).length===0)return null;const o=Object.keys(X).length,N=Object.values(X).filter(Boolean).length,m=o-N;return m===0?{type:"qualified",text:"Qualified",flag:Be}:m<=2?{type:"discretionary",text:"Discretionary",flag:dr}:{type:"blocked",text:"Blocked",flag:He}},Oe=o=>{D(N=>({...N,[o]:!N[o]}))},Rt=o=>{if(W(o),b(!0),B(o.tradeType||""),z(o.entryPrice?o.entryPrice.toString():o.lastPrice?o.lastPrice.toString():""),E(o.stopLoss?o.stopLoss.toString():""),te(o.target?o.target.toString():""),se(o.accountSize?o.accountSize.toString():""),ye(o.riskPerTrade?o.riskPerTrade.toString():"2"),g(o.overrideReason||""),o.checklistItems&&Object.keys(o.checklistItems).length>0)D(o.checklistItems);else if(o.tradeType&&ge[o.tradeType]){const N={};ge[o.tradeType].checklists.forEach(m=>{N[m]=!1}),ge[o.tradeType].newsValidation.forEach(m=>{N[m]=!1}),D(N)}else D({})},lt=()=>{b(!1),W(null)},zt=()=>{if(!V||!M)return;const o=je();o&&(a(N=>({...N,items:(N?.items||[]).map(m=>{if(m.id===V.id){const ae=ge[M].newsValidation.every(de=>X[de]);return{...m,tradeType:M,tradeTypeName:ge[M].name,journalVerdict:o.text,journalVerdictType:o.type,journalVerdictFlag:o.flag,entryPrice:S,stopLoss:k,target:G,takeProfit:G,accountSize:re,riskPerTrade:ie,riskReward:Te(),positionSize:Ee(),checklistItems:{...X},overrideReason:o.type!=="qualified"?U:"",journaledAt:new Date().toISOString(),flags:{...m.flags,news:ae}}}return m})})),b(!1),W(null),B(""),D({}),z(""),E(""),te(""),se(""),ye("2"),g(""))};h.useEffect(()=>{if(!K||!M||!ge[M])return;if(Object.keys(X).length===0){const N={};ge[M].checklists.forEach(m=>{N[m]=!1}),ge[M].newsValidation.forEach(m=>{N[m]=!1}),D(N)}},[M,K]);const It=o=>{if(!o.tradeType||!o.entryPrice||!o.stopLoss||!o.target){u("Complete journal entry first"),y("error");return}try{const N=parseFloat(o.entryPrice),m=parseFloat(o.stopLoss),oe=parseFloat(o.target),ae=Math.abs(N-m),de=Math.abs(oe-N),Se=ae>0?(de/ae).toFixed(2):"0",ue={id:Date.now(),ticker:o.symbol,setup:o.tradeTypeName||o.tradeType,riskReward:Se,verdict:o.journalVerdict||"Not journaled",outcome:"Open",entryPrice:parseFloat(o.entryPrice),stopLoss:parseFloat(o.stopLoss),target:parseFloat(o.target),positionSize:o.positionSize,accountSize:o.accountSize,riskPerTrade:o.riskPerTrade,executedAt:new Date().toISOString(),notes:o.notes||""},be=JSON.parse(localStorage.getItem("trade_journal_trades")||"[]"),Me=[ue,...be];localStorage.setItem("trade_journal_trades",JSON.stringify(Me)),u(`Trade executed: ${o.symbol} logged to journal`),y("success")}catch(N){console.error("Error executing trade:",N),u("Failed to execute trade"),y("error")}},Wt=o=>{B(o),D({}),z(""),E(""),te(""),se(""),ye("2"),g("")},Bt=(o,N)=>{a(m=>({...m,items:(m?.items||[]).map(oe=>oe.id===o?{...oe,quickTradeType:N,quickTradeTypeName:N?ge[N]?.name||N:""}:oe)}))},Ot=o=>{if(C.size===0){u("Please select at least one stock first"),y("error");return}a(N=>({...N,items:(N?.items||[]).map(m=>C.has(m.id)?{...m,quickTradeType:o,quickTradeTypeName:o?ge[o]?.name||o:""}:m)})),u(`Set ${C.size} stocks to ${ge[o]?.name||o}`),y("success")},Mt=o=>{if(!o)return;const N=`https://elite.finviz.com/charts?t=${o.toUpperCase()}&p=d&l=1h1v`;window.open(N,"_blank")};return e.jsxs("div",{style:{backgroundColor:P?"rgb(140,185,162)":"transparent",minHeight:"100vh",color:P?"#000000":"#ffffff",padding:"0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",borderBottom:`1px solid ${j}`,background:"rgba(0,0,0,0.3)",gap:"10px",marginBottom:"20px"},children:[e.jsx(Z,{onClick:()=>n("/universes"),style:{background:r.pathname==="/universes"||r.pathname.startsWith("/universe/")?j:"transparent",color:r.pathname==="/universes"||r.pathname.startsWith("/universe/")?"#000000":j,border:`1px solid ${j}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"UNIVERSE"}),e.jsx(Z,{onClick:()=>n("/journal"),style:{background:r.pathname==="/journal"?j:"transparent",color:r.pathname==="/journal"?"#000000":j,border:`1px solid ${j}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"JOURNAL"}),e.jsx(Z,{onClick:()=>n("/market"),style:{background:r.pathname==="/market"?j:"transparent",color:r.pathname==="/market"?"#000000":j,border:`1px solid ${j}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"MARKET"}),e.jsx(Z,{onClick:()=>n("/"),style:{background:r.pathname==="/"||r.pathname.startsWith("/burn/")?j:"transparent",color:r.pathname==="/"||r.pathname.startsWith("/burn/")?"#000000":j,border:`1px solid ${j}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"BURNPAGE"})]}),e.jsxs("div",{style:{padding:"20px"},children:[x&&e.jsx("div",{style:{position:"fixed",top:24,left:0,right:0,zIndex:10001,display:"flex",justifyContent:"center",pointerEvents:"none"},children:e.jsx("div",{style:{minWidth:320,maxWidth:480,pointerEvents:"auto"},children:e.jsx(ve,{message:x,type:d,onClose:()=>u("")})})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[e.jsx(Ke,{to:"/universes",style:{display:"inline-flex",alignItems:"center",border:"none",background:"none",padding:0,margin:0,textDecoration:"none"},"aria-label":"back to universes",children:e.jsx("img",{src:Nt,alt:"back",style:{width:24,height:24,filter:P?"invert(1)":"none"}})}),e.jsx("h1",{style:{color:j,fontFamily:"'Courier New', monospace",margin:0,marginLeft:0,textAlign:"right",flex:1},children:i?.name||"UNIVERSE SCREENER"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[e.jsx(Z,{onClick:le,children:$.size===(i?.items?.length||0)?"DESELECT ALL":"SELECT ALL"}),e.jsxs(Z,{onClick:Ce,disabled:$.size===0,children:["CREATE WATCHLIST FROM SELECTED (",$.size,")"]}),w&&e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("span",{style:{color:j,fontSize:"12px",fontFamily:"'Courier New', monospace"},children:"MASS SET:"}),Object.keys(ge).map(o=>e.jsx("button",{onClick:()=>Ot(o),disabled:C.size===0,style:{background:"transparent",color:j,border:`1px solid ${j}`,padding:"4px 8px",fontFamily:"Courier New",fontSize:10,cursor:C.size===0?"not-allowed":"pointer",borderRadius:0,opacity:C.size===0?.5:1,transition:"all 0.2s"},title:`Set ${C.size} selected stocks to ${ge[o].name}`,children:o.charAt(0).toUpperCase()+o.slice(1).replace(/([A-Z])/g," $1")},o))]})]}),(i?.items?.length||0)>0&&e.jsxs("div",{style:{overflowX:"auto"},children:[(i?.items?.length||0)>0&&e.jsx("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:16},children:e.jsx("button",{onClick:()=>L(o=>!o),style:{background:"none",border:"none",color:j,fontFamily:"'Courier New', monospace",fontSize:"12px",padding:"2px 8px",borderRadius:0,fontWeight:400,textTransform:"lowercase",letterSpacing:0,cursor:"pointer",transition:"all 0.2s",minWidth:0,boxShadow:"none"},children:w?"done":"edit"})}),e.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0,color:j,background:"black",fontFamily:"Courier New",border:`2px solid ${j}`,fontSize:"15px",boxShadow:"0 2px 16px 0 rgba(140,185,162,0.08)",tableLayout:"fixed"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:5,background:"black",borderBottom:`2px solid ${j}`},children:e.jsxs("tr",{style:{borderBottom:`2px solid ${j}`},children:[e.jsx("th",{style:{width:"7.14%",padding:"8px",textAlign:"center",borderBottom:`1px solid ${j}`,background:"black"},children:w?e.jsx("input",{type:"checkbox",checked:C.size===(i?.items?.length||0)&&(i?.items?.length||0)>0,onChange:ne,style:{accentColor:j}}):null}),e.jsxs("th",{onClick:()=>pe("symbol"),style:{width:"7.14%",padding:"8px",textAlign:"left",borderBottom:`1px solid ${j}`,background:"black",cursor:"pointer"},children:["Symbol ",ce("symbol")]}),e.jsxs("th",{onClick:()=>pe("tradeType"),style:{width:"7.14%",padding:"8px",textAlign:"center",borderBottom:`1px solid ${j}`,background:"black",fontSize:15,cursor:"pointer"},children:["Trade Type ",ce("tradeType")]}),e.jsxs("th",{onClick:()=>pe("quickTradeType"),style:{width:"7.14%",padding:"8px",textAlign:"center",borderBottom:`1px solid ${j}`,background:"black",fontSize:15,cursor:"pointer"},children:["Quick Type ",ce("quickTradeType")]}),e.jsxs("th",{onClick:()=>pe("lastPrice"),style:{width:"7.14%",padding:"8px",textAlign:"right",borderBottom:`1px solid ${j}`,background:"black",cursor:"pointer"},children:["Last Price ",ce("lastPrice")]}),e.jsxs("th",{onClick:()=>pe("tradeType"),style:{width:"7.14%",padding:"2px 4px",textAlign:"center",borderBottom:`1px solid ${j}`,background:"black",fontSize:15,cursor:"pointer"},children:["SETUP ",ce("tradeType")]}),e.jsxs("th",{onClick:()=>pe("flags.news"),style:{width:"7.14%",padding:"2px 4px",textAlign:"center",borderBottom:`1px solid ${j}`,background:"black",fontSize:15,cursor:"pointer"},children:["NEWS ",ce("flags.news")]}),e.jsxs("th",{onClick:()=>pe("journalVerdict"),style:{width:"7.14%",padding:"2px 4px",textAlign:"center",borderBottom:`1px solid ${j}`,background:"black",fontSize:15,cursor:"pointer"},children:["VERDICT ",ce("journalVerdict")]}),e.jsxs("th",{onClick:()=>pe("entryPrice"),style:{width:"7.14%",padding:"8px",textAlign:"right",borderBottom:`1px solid ${j}`,background:"black",cursor:"pointer"},children:["Entry Price ",ce("entryPrice")]}),e.jsxs("th",{onClick:()=>pe("stopLoss"),style:{width:"7.14%",padding:"8px",textAlign:"right",borderBottom:`1px solid ${j}`,background:"black",fontSize:15,cursor:"pointer"},children:["SL ",ce("stopLoss")]}),e.jsxs("th",{onClick:()=>pe("takeProfit"),style:{width:"7.14%",padding:"8px",textAlign:"right",borderBottom:`1px solid ${j}`,background:"black",fontSize:15,cursor:"pointer"},children:["TP ",ce("takeProfit")]}),e.jsxs("th",{onClick:()=>pe("positionSize"),style:{width:"7.14%",padding:"8px",textAlign:"right",borderBottom:`1px solid ${j}`,background:"black",fontSize:15,cursor:"pointer"},children:["Position ",ce("positionSize")]}),e.jsxs("th",{onClick:()=>pe("notes"),style:{width:"7.14%",padding:"8px",textAlign:"left",borderBottom:`1px solid ${j}`,background:"black",fontSize:15,cursor:"pointer"},children:["Notes ",ce("notes")]}),e.jsx("th",{style:{width:"7.14%",padding:"8px",textAlign:"center",borderBottom:`1px solid ${j}`,background:"black",fontSize:15},children:"Execute"})]})}),e.jsx("tbody",{children:he.map((o,N)=>e.jsxs("tr",{style:{borderBottom:`1px solid ${j}`,background:N%2===0?"#0a0a0a":"#181818",transition:"background 0.2s",boxShadow:"none",outline:"none",cursor:"pointer"},onMouseEnter:m=>m.currentTarget.style.background="#232323",onMouseLeave:m=>m.currentTarget.style.background=N%2===0?"#0a0a0a":"#181818",onClick:m=>{m.target.closest("button")||m.target.tagName==="BUTTON"||m.target.closest("input")||Rt(o)},children:[e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"center"},children:w?e.jsx("input",{type:"checkbox",checked:C.has(o.id),onChange:()=>ee(o.id),style:{accentColor:j}}):null}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"left"},children:e.jsxs("span",{onClick:m=>{m.stopPropagation(),Mt(o.symbol)},style:{color:j,cursor:"pointer",fontFamily:"'Courier New', monospace",fontSize:14,display:"flex",alignItems:"center",gap:"4px",textDecoration:"underline"},title:`Click to open ${o.symbol} chart in new tab`,children:[o.symbol,e.jsx("img",{src:Be,alt:"Open Chart",style:{width:12,height:12,verticalAlign:"middle"}})]})}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"center",cursor:w?"pointer":"default"},onClick:w?()=>{const m=document.querySelector(`select[data-item-id="${o.id}"][data-field="tradeType"]`);m&&m.focus()}:void 0,children:w?e.jsxs("select",{value:o.tradeType||"",onChange:m=>_(o.id,"tradeType",m.target.value),"data-item-id":o.id,"data-field":"tradeType",style:{background:"black",color:j,border:`1px solid ${j}`,padding:"2px 4px",fontFamily:"Courier New",fontSize:12},children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"breakout",children:"Breakout"}),e.jsx("option",{value:"pullback",children:"Pullback"}),e.jsx("option",{value:"shortSqueeze",children:"Short Squeeze"}),e.jsx("option",{value:"postEarnings",children:"Post-Earnings"})]}):e.jsx("span",{style:{fontSize:14},children:o.tradeTypeName||"-"})}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"center"},children:e.jsxs("select",{value:o.quickTradeType||"",onChange:m=>{m.stopPropagation(),Bt(o.id,m.target.value)},style:{background:"transparent",color:j,border:"none",borderBottom:`1px solid ${j}`,padding:"1px 2px",fontFamily:"Courier New",fontSize:14,cursor:"pointer",borderRadius:0,width:"90%",textAlign:"center",height:"20px",minHeight:"20px",outline:"none"},onClick:m=>m.stopPropagation(),children:[e.jsx("option",{value:"",children:"-"}),Object.keys(ge).map(m=>e.jsx("option",{value:m,children:ge[m].name},m))]})}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"right",cursor:w?"text":"default"},onClick:w?()=>{const m=document.querySelector(`input[data-item-id="${o.id}"][data-field="lastPrice"]`);m&&m.focus()}:void 0,children:w?e.jsx("input",{type:"number",step:"0.01",value:o.lastPrice||"",onChange:m=>_(o.id,"lastPrice",parseFloat(m.target.value)||0),placeholder:"0.00","data-item-id":o.id,"data-field":"lastPrice",style:{backgroundColor:"black",color:j,border:`1px solid ${j}`,padding:"4px 6px",fontFamily:"'Courier New', monospace",fontSize:14,width:"60px",textAlign:"right",borderRadius:0}}):e.jsxs("span",{children:["$",o.lastPrice?o.lastPrice.toFixed(2):"0.00"]})}),e.jsx("td",{style:{width:"7.14%",padding:"2px 4px",textAlign:"center"},children:e.jsx("img",{src:o.tradeType?Be:He,alt:"SETUP",title:o.tradeTypeName||"No setup selected",style:{width:13,height:13,verticalAlign:"middle",filter:"drop-shadow(0 0 1px #222)"}})}),e.jsx("td",{style:{width:"7.14%",padding:"2px 4px",textAlign:"center"},children:e.jsx("img",{src:o.flags.news||o.newsFlag?Be:He,alt:"NEWS",title:"NEWS",style:{width:13,height:13,verticalAlign:"middle",filter:"drop-shadow(0 0 1px #222)"}})}),e.jsx("td",{style:{width:"7.14%",padding:"2px 4px",textAlign:"center"},children:e.jsx("img",{src:o.journalVerdictFlag||He,alt:"VERDICT",title:o.journalVerdict||"Not journaled",style:{width:13,height:13,verticalAlign:"middle",filter:"drop-shadow(0 0 1px #222)"}})}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"right"},children:o.entryPrice!==void 0&&o.entryPrice!==null?o.entryPrice:"-"}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"right"},children:o.stopLoss?`$${o.stopLoss}`:"-"}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"right"},children:o.target?`$${o.target}`:o.takeProfit?`$${o.takeProfit}`:"-"}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"right"},children:o.positionSize?o.positionSize:"-"}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"left",cursor:w?"text":"default"},onClick:w?()=>{const m=document.querySelector(`input[data-item-id="${o.id}"][data-field="notes"]`);m&&m.focus()}:void 0,children:w?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("input",{type:"text",value:o.notes,onChange:m=>_(o.id,"notes",m.target.value),placeholder:"Notes...","data-item-id":o.id,"data-field":"notes",style:{backgroundColor:"black",color:j,borderRadius:0,border:`1px solid ${j}`,fontSize:14,boxShadow:o.notes.trim()?`0 0 4px 0 ${j}22`:"none",fontFamily:"'Courier New', monospace",width:"80px",padding:"4px 6px"}}),e.jsx("button",{onClick:()=>Q(o.id),style:{background:"none",border:"none",color:j,padding:0,margin:0,cursor:"pointer",fontSize:14,display:"inline-flex",alignItems:"center",transition:"all 0.2s"},title:"Delete Ticker",children:e.jsx(cr,{})})]}):e.jsx("span",{style:{color:j,fontFamily:"'Courier New', monospace",fontSize:14},children:o.notes||"-"})}),e.jsx("td",{style:{width:"7.14%",padding:"8px",textAlign:"center"},children:e.jsx("button",{onClick:()=>It(o),disabled:!o.tradeType||!o.entryPrice||!o.stopLoss||!o.target,style:{background:!o.tradeType||!o.entryPrice||!o.stopLoss||!o.target?"#222":j,color:!o.tradeType||!o.entryPrice||!o.stopLoss||!o.target?j:"black",border:`1px solid ${j}`,borderRadius:0,padding:"6px 12px",fontFamily:"'Courier New', monospace",fontWeight:700,fontSize:14,cursor:!o.tradeType||!o.entryPrice||!o.stopLoss||!o.target?"not-allowed":"pointer",transition:"all 0.2s",minWidth:60,height:"32px",minHeight:"32px",display:"flex",alignItems:"center",justifyContent:"center"},title:!o.tradeType||!o.entryPrice||!o.stopLoss||!o.target?"Complete journal entry first":"Execute trade",children:"EXECUTE"})})]},o.id))})]})]}),!i&&e.jsx("div",{style:{textAlign:"center",color:"#999",fontFamily:"'Courier New', monospace",marginTop:"50px"},children:"‚ö†Ô∏è Universe not found."}),i&&(i?.items?.length||0)===0&&e.jsx("div",{style:{textAlign:"center",color:"#999",fontFamily:"'Courier New', monospace",marginTop:"50px"},children:"‚ö†Ô∏è No tickers in universe yet. Add some tickers above to get started."}),K&&V&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:lt,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:10009,pointerEvents:"auto"}}),e.jsxs("div",{style:{position:"fixed",top:0,right:0,width:800,height:"100vh",background:"#0a0a0a",color:j,zIndex:10010,boxShadow:`-4px 0 24px 0 ${j}33`,borderLeft:`2px solid ${j}`,display:"flex",flexDirection:"column",transition:"transform 0.3s",fontFamily:"Courier New",padding:0,pointerEvents:"auto"},onClick:o=>o.stopPropagation(),onMouseDown:o=>o.stopPropagation(),children:[e.jsxs("div",{style:{padding:28,flex:1,overflowY:"auto"},children:[e.jsxs("h2",{style:{color:j,marginBottom:18,fontWeight:700,fontSize:24},children:["Journal: ",V.symbol]}),e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{marginBottom:"15px",fontSize:"18px"},children:"1. SELECT SETUP TYPE"}),e.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:Object.entries(ge).map(([o,N])=>e.jsx("button",{onClick:()=>Wt(o),style:{background:M===o?j:"transparent",color:M===o?"#000":j,border:`2px solid ${j}`,fontWeight:M===o?"bold":"normal",padding:"8px 16px",fontFamily:"Courier New",cursor:"pointer"},children:N.name},o))})]}),M&&e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsxs("h3",{style:{marginBottom:"15px",fontSize:"18px"},children:["2. VERIFY SETUP CRITERIA (",ge[M].name,")"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"10px",border:`2px solid ${j}`,padding:"16px",borderRadius:"4px",background:"rgba(140,185,162,0.04)",marginBottom:"20px"},children:ge[M].checklists.map((o,N)=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px",cursor:"pointer"},children:[e.jsx("span",{onClick:()=>Oe(o),style:{display:"inline-flex",alignItems:"center",cursor:"pointer"},tabIndex:0,onKeyDown:m=>{(m.key===" "||m.key==="Enter")&&Oe(o)},role:"checkbox","aria-checked":X[o]||!1,children:e.jsx("img",{src:X[o]?St:wt,alt:X[o]?"Checked":"Unchecked",style:{width:22,height:22}})}),e.jsx("span",{style:{fontSize:"14px"},children:o})]},N))}),e.jsxs("div",{style:{marginTop:24},children:[e.jsx("h4",{style:{marginBottom:"10px",fontSize:"16px",color:j},children:"News Validation"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"10px",border:`2px solid ${j}`,padding:"16px",borderRadius:"4px",background:"rgba(140,185,162,0.04)"},children:ge[M].newsValidation.map((o,N)=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px",cursor:"pointer"},children:[e.jsx("span",{onClick:()=>Oe(o),style:{display:"inline-flex",alignItems:"center",cursor:"pointer"},tabIndex:0,onKeyDown:m=>{(m.key===" "||m.key==="Enter")&&Oe(o)},role:"checkbox","aria-checked":X[o]||!1,children:e.jsx("img",{src:X[o]?St:wt,alt:X[o]?"Checked":"Unchecked",style:{width:22,height:22}})}),e.jsx("span",{style:{fontSize:"14px"},children:o})]},N))})]})]}),M&&e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{marginBottom:"15px",fontSize:"18px"},children:"3. ENTRY DETAILS"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Entry Price:"}),e.jsx("input",{type:"number",step:"0.01",value:S,onChange:o=>z(o.target.value),style:{width:"100%",padding:"8px",background:"transparent",border:`1px solid ${j}`,color:j,fontFamily:"Courier New"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Stop Loss:"}),e.jsx("input",{type:"number",step:"0.01",value:k,onChange:o=>E(o.target.value),style:{width:"100%",padding:"8px",background:"transparent",border:`1px solid ${j}`,color:j,fontFamily:"Courier New"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Target:"}),e.jsx("input",{type:"number",step:"0.01",value:G,onChange:o=>te(o.target.value),style:{width:"100%",padding:"8px",background:"transparent",border:`1px solid ${j}`,color:j,fontFamily:"Courier New"}})]})]})]}),M&&e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{marginBottom:"15px",fontSize:"18px"},children:"4. RISK MANAGEMENT"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Account Size ($):"}),e.jsx("input",{type:"number",value:re,onChange:o=>se(o.target.value),style:{width:"100%",padding:"8px",background:"transparent",border:`1px solid ${j}`,color:j,fontFamily:"Courier New"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Risk Per Trade (%):"}),e.jsx("input",{type:"number",step:"0.1",value:ie,onChange:o=>ye(o.target.value),style:{width:"100%",padding:"8px",background:"transparent",border:`1px solid ${j}`,color:j,fontFamily:"Courier New"}})]})]}),e.jsx("div",{style:{marginTop:"15px",padding:"15px",border:`1px solid ${j}`,background:"rgba(140,185,162,0.1)"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Risk:Reward:"})," ",Te()?`${Te()}:1`:"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Position Size:"})," ",Ee()?`${Ee()} shares`:"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Risk Amount:"})," ",re&&ie?`$${(parseFloat(re)*parseFloat(ie)/100).toFixed(2)}`:"N/A"]})]})})]}),je()&&e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{marginBottom:"15px",fontSize:"18px"},children:"5. SETUP VERDICT"}),e.jsxs("div",{style:{padding:"15px",border:`2px solid ${j}`,textAlign:"center",fontSize:"18px",fontWeight:"bold",background:je().type==="qualified"?"rgba(0,255,0,0.1)":je().type==="discretionary"?"rgba(255,165,0,0.1)":"rgba(255,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx("img",{src:je().flag,alt:je().text,style:{width:"24px",height:"24px"}}),je().text]}),je().type!=="qualified"&&e.jsxs("div",{style:{marginTop:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Override Reason (Required for Discretionary/Blocked):"}),e.jsx("textarea",{value:U,onChange:o=>g(o.target.value),style:{width:"100%",padding:"8px",background:"transparent",border:`1px solid ${j}`,color:j,fontFamily:"Courier New",minHeight:"60px"},placeholder:"Explain why you're proceeding despite failed criteria..."})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:16,padding:20,borderTop:`1.5px solid ${j}`,background:"#111"},children:[e.jsx("button",{onClick:lt,style:{fontFamily:"Courier New",fontWeight:700,fontSize:17,borderRadius:4,padding:"8px 28px",cursor:"pointer",transition:"all 0.2s",background:"black",color:j,border:`2px solid ${j}`},children:"Cancel"}),e.jsx("button",{onClick:zt,style:{fontFamily:"Courier New",fontWeight:700,fontSize:17,borderRadius:4,padding:"8px 28px",cursor:"pointer",transition:"all 0.2s",background:j,color:"black",border:`2px solid ${j}`},children:"Save Journal"})]})]})]}),e.jsx("div",{style:{marginTop:32,display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",width:420,gap:10,height:"32px"},children:[e.jsx("input",{type:"text",value:l,onChange:o=>c(o.target.value),placeholder:"e.g. AAPL, MSFT, GOOGL, TSLA",style:{flex:1,fontFamily:"'Courier New', Courier, monospace",fontSize:"14px",backgroundColor:"black",border:`1px solid ${j}`,color:j,padding:"6px 12px",boxSizing:"border-box",minWidth:0,borderRadius:0,height:"32px",maxHeight:"32px",minHeight:"32px",margin:0,outline:"none",lineHeight:"20px"},onKeyDown:o=>{o.key==="Enter"&&(o.preventDefault(),O())}}),e.jsx(Z,{onClick:O,disabled:T||!l.trim(),mobile:!1,title:"Add ticker(s)",style:{backgroundColor:T?"#666666":j,color:"black",opacity:T?.6:1,minWidth:0,height:"32px",minHeight:"32px",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",padding:"6px 12px",borderRadius:0},children:T?"...":"+++"})]})})]})]})},me="rgb(140,185,162)",gr=()=>{const t=$e(),n=Fe(),[r,i]=h.useState({}),{notification:a,notificationType:s,setNotification:p,setNotificationType:l}=Re(),[c,x]=h.useState(!1),[d,u]=h.useState(!1),[y,T]=h.useState(!1),[I,$]=h.useState(null),{isInverted:f}=Ne(),v=J(me),F=J("black"),H=J("#e31507"),Y=J("#888");h.useEffect(()=>{try{const D=localStorage.getItem("burnlist_universes");if(D){const S=JSON.parse(D);i(S)}}catch(D){console.error("Failed to load universes:",D)}},[]),h.useEffect(()=>{localStorage.setItem("burnlist_universes",JSON.stringify(r))},[r]);const P=()=>{u(!0),setTimeout(()=>u(!1),150);const S=`Universe ${qe(new Date)}`,z=_e(),k=S.toLowerCase().replace(/[^a-z0-9]/g,"-");if(Object.values(r).some(re=>re.name&&re.name.toLowerCase()===S.toLowerCase())){p("‚ö†Ô∏è Universe name already exists"),l("error");return}const G={id:z,name:S,slug:k,items:[],reason:"",createdAt:new Date().toISOString()},te={...r,[z]:G};i(te),localStorage.setItem("burnlist_universes",JSON.stringify(te)),p("")},K=D=>{const S=Object.keys(r).find(E=>r[E].id===D);if(!S){console.log("üóëÔ∏è Could not find universe with id:",D);return}const{[S]:z,...k}=r;i(k),localStorage.setItem("burnlist_universes",JSON.stringify(k)),z?console.log("üóëÔ∏è Deleted universe:",z.name):console.log("üóëÔ∏è Deleted universe with id:",D)};h.useCallback((D,S)=>{if(Object.values(r).some(k=>k.id!==D&&k.name&&k.name.toLowerCase()===S.toLowerCase())){p("‚ö†Ô∏è Name already exists"),l("error");return}i(k=>{const E={...k};return E[D]&&(E[D]={...E[D],name:S,slug:S.toLowerCase().replace(/[^a-z0-9]/g,"-")}),localStorage.setItem("burnlist_universes",JSON.stringify(E)),E})},[i,r]);const b=h.useCallback((D,S)=>{const z={...r,[D]:{...r[D],reason:S}};i(z),localStorage.setItem("burnlist_universes",JSON.stringify(z))},[i,r]),[V,W]=h.useState({});h.useEffect(()=>{if(c){const D={};Object.values(r).forEach(S=>{D[S.id]={value:S.name,prev:S.name}}),W(D)}else W({})},[c,r]);const M=(D,S)=>{W(z=>({...z,[D]:{...z[D],value:S}}))},B=D=>{const S=V[D]?.value||"";if(Object.values(r).some(k=>k.id!==D&&k.name&&k.name.toLowerCase()===S.toLowerCase())){p("‚ö†Ô∏è Name already exists"),l("error"),W(k=>({...k,[D]:{...k[D],value:k[D].prev}}));return}i(k=>{const E={...k};return E[D]&&(E[D]={...E[D],name:S,slug:S.toLowerCase().replace(/[^a-z0-9]/g,"-")}),localStorage.setItem("burnlist_universes",JSON.stringify(E)),E}),W(k=>({...k,[D]:{...k[D],prev:S}}))},X=h.useMemo(()=>Object.values(r),[r]);return e.jsx("div",{style:{fontFamily:"Courier New",color:v,backgroundColor:F,minHeight:"100vh",padding:"0"},children:e.jsxs("div",{style:{padding:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24},children:[e.jsx("div",{children:e.jsx("strong",{style:{fontSize:"170%",color:F},children:"UNIVERSE SCREENER"})}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:10},children:e.jsxs("span",{style:{color:v},children:["UNIVERSES: ",Object.keys(r).length]})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",borderBottom:`1px solid ${me}`,background:"rgba(0,0,0,0.3)",gap:"10px",marginBottom:"20px"},children:[e.jsx(Z,{onClick:()=>t("/universes"),style:{background:n.pathname==="/universes"||n.pathname.startsWith("/universe/")?me:"transparent",color:n.pathname==="/universes"||n.pathname.startsWith("/universe/")?"#000000":me,border:`1px solid ${me}`,padding:"8px 16px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"UNIVERSE"}),e.jsx(Z,{onClick:()=>t("/journal"),style:{background:n.pathname==="/journal"?me:"transparent",color:n.pathname==="/journal"?"#000000":me,border:`1px solid ${me}`,padding:"8px 16px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"JOURNAL"}),e.jsx(Z,{onClick:()=>t("/market"),style:{background:n.pathname==="/market"?me:"transparent",color:n.pathname==="/market"?"#000000":me,border:`1px solid ${me}`,padding:"8px 16px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"MARKET"}),e.jsx(Z,{onClick:()=>t("/"),style:{background:n.pathname==="/"||n.pathname.startsWith("/burn/")?me:"transparent",color:n.pathname==="/"||n.pathname.startsWith("/burn/")?"#000000":me,border:`1px solid ${me}`,padding:"8px 16px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"BURNPAGE"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("style",{children:`
            .clicked-button {
              background-color: ${F} !important;
              color: ${v} !important;
            }
          `}),e.jsx(Z,{onClick:()=>{x(!c),console.log("üõ†Ô∏è Edit mode:",!c)},style:{backgroundColor:c?v:F,color:c?F:v},children:c?"DONE":"EDIT"})]}),a&&e.jsx("div",{style:{position:"fixed",top:24,left:0,right:0,zIndex:10001,display:"flex",justifyContent:"center",pointerEvents:"none"},children:e.jsx("div",{style:{minWidth:320,maxWidth:480,pointerEvents:"auto"},children:e.jsx(ve,{message:a,type:s,onClose:()=>p("")})})}),y&&e.jsx(ve,{message:"Loading universes...",type:"loading"}),I&&e.jsx(ve,{message:I,type:"error",onClose:()=>$(null)}),Object.keys(r).length===0&&e.jsx("p",{style:{textAlign:"center",color:Y,marginTop:"50px"},children:"No universes found. Create your first universe to get started."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 252px)",rowGap:"20px",columnGap:"20px",margin:"70px 0 1px 0",justifyContent:"center",alignItems:"start"},children:X.map((D,S)=>{const z=D.items||[],k=e.jsxs("div",{style:{width:252,height:c?250:120,fontFamily:"Courier New",background:"transparent",padding:"10px 8px",margin:0,border:`1px solid ${v}`,borderRadius:0,boxShadow:"none",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",position:"relative",boxSizing:"border-box",overflow:"hidden"},children:[c?e.jsx("input",{value:V[D.id]?.value??D.name,onChange:E=>M(D.id,E.target.value),onBlur:()=>B(D.id),onKeyDown:E=>{E.key==="Enter"&&(E.preventDefault(),B(D.id))},style:{fontFamily:"Courier New",fontSize:18,color:v,background:F,border:`1px solid ${Y}`,marginBottom:4,padding:"2px 4px",width:"100%",fontWeight:"bold",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}):e.jsx("div",{style:{fontSize:18,color:v,fontWeight:"bold",marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.name||`UNIVERSE ${S+1}`}),c&&e.jsx(Z,{onClick:()=>K(D.id),style:{backgroundColor:F,color:H,border:`1px solid ${H}`,padding:"2px 6px",marginBottom:4,fontSize:10,width:"100%",fontWeight:"bold"},children:"DELETE"}),c?e.jsx("input",{value:D.reason||"",onChange:E=>b(D.id,E.target.value),style:{fontFamily:"Courier New",fontSize:14,color:v,background:F,border:`1px solid ${Y}`,marginBottom:4,padding:"2px 4px",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"Reason..."}):e.jsx("div",{style:{fontSize:14,color:v,marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.reason||"N/A"}),e.jsxs("div",{style:{fontSize:13,color:v,marginBottom:2},children:[z.length," tickers"]}),e.jsx("div",{style:{fontSize:11,color:Y,marginBottom:2},children:qe(D.createdAt)}),e.jsx("div",{style:{fontSize:19,color:v,fontWeight:"bold",marginBottom:2},children:z.length>0?"ACTIVE":"EMPTY"})]});return e.jsx("div",{style:{margin:0},children:c?k:e.jsx(Ke,{to:`/universe/${D.slug}`,style:{textDecoration:"none",color:"inherit"},children:k})},D.id)})}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px",marginBottom:"20px"},children:e.jsx(Z,{onClick:P,className:d?"clicked-button":"",style:{backgroundColor:v,color:F,transition:"all 0.2s ease-in-out",padding:"8px 16px",fontSize:"14px",fontWeight:"bold"},children:"+++"})})]})})},vt="rgb(140,185,162)",hr=({value:t,onSelect:n})=>{const[r,i]=h.useState([]);return h.useEffect(()=>{try{const a=localStorage.getItem("burnlist_watchlists");if(a){const s=JSON.parse(a),p=Object.values(s).map(l=>({name:l.name,slug:l.slug}));i(p)}}catch{i([])}},[]),e.jsxs("select",{value:t||"",onChange:a=>n&&n(a.target.value),style:{background:"black",color:vt,border:`1px solid ${vt}`,fontFamily:"Courier New, monospace",fontSize:16,padding:"6px 12px",borderRadius:4,outline:"none",minWidth:180,margin:0},children:[e.jsx("option",{value:"",disabled:!0,children:"Select Watchlist"}),r.map(a=>e.jsx("option",{value:a.slug,children:a.name},a.slug))]})},q="rgb(140,185,162)",xr="#e31507",We={border:`1.5px solid ${q}`,borderRadius:4,background:"black",color:q,fontFamily:"Courier New",padding:16,marginBottom:24,boxShadow:"0 2px 8px 0 rgba(140,185,162,0.08)"};function mr(t){if(!t||!Array.isArray(t.historicalData)||t.historicalData.length<2)return{latest:null,change:null};const n=t.historicalData[t.historicalData.length-1]?.price,r=t.historicalData[t.historicalData.length-2]?.price;if(typeof n!="number"||typeof r!="number"||r===0)return{latest:null,change:null};const i=(n-r)/r*100;return{latest:n,change:i}}function fr(){const t=h.useRef(null);return h.useEffect(()=>{t.current&&(t.current.innerHTML="");const n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",n.innerHTML=JSON.stringify({allow_symbol_change:!0,calendar:!1,details:!1,hide_side_toolbar:!0,hide_top_toolbar:!0,hide_legend:!0,hide_volume:!0,hotlist:!1,interval:"D",locale:"en",save_image:!1,style:"1",symbol:"NASDAQ:AAPL",theme:"dark",timezone:"Etc/UTC",backgroundColor:"rgba(0, 0, 0, 1)",gridColor:"rgba(102, 187, 106, 0.06)",watchlist:[],withdateranges:!1,compareSymbols:[],studies:["STD;DEMA"],autosize:!0,overrides:{"mainSeriesProperties.candleStyle.upColor":"#00aaff","mainSeriesProperties.candleStyle.downColor":"#ffe600","mainSeriesProperties.candleStyle.borderUpColor":"#00aaff","mainSeriesProperties.candleStyle.borderDownColor":"#ffe600","mainSeriesProperties.candleStyle.wickUpColor":"#00aaff","mainSeriesProperties.candleStyle.wickDownColor":"#ffe600"}}),t.current&&t.current.appendChild(n),()=>{t.current&&(t.current.innerHTML="")}},[]),e.jsxs("div",{className:"tradingview-widget-container",style:{height:"150px",width:"100%"},children:[e.jsx("div",{ref:t,className:"tradingview-widget-container__widget",style:{height:"167px",width:"100%"}}),e.jsx("div",{className:"tradingview-widget-copyright",children:e.jsx("a",{href:"https://www.tradingview.com/",rel:"noopener nofollow",target:"_blank",children:e.jsx("span",{className:"blue-text",children:"Track all markets on TradingView"})})})]})}const yr=()=>{const t=$e(),n=Fe(),[r,i]=h.useState(""),[a,s]=h.useState(null);return h.useEffect(()=>{if(!r){s(null);return}try{const p=localStorage.getItem("burnlist_watchlists");if(p){const l=JSON.parse(p),c=Object.values(l).find(x=>x.slug===r);s(c||null)}else s(null)}catch{s(null)}},[r]),e.jsxs("div",{style:{fontFamily:"Courier New",color:q,background:"black",minHeight:"100vh",padding:"0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",borderBottom:`1px solid ${q}`,background:"rgba(0,0,0,0.3)",gap:"10px",marginBottom:"20px"},children:[e.jsx(CustomButton,{onClick:()=>t("/universes"),style:{background:n.pathname==="/universes"||n.pathname.startsWith("/universe/")?q:"transparent",color:n.pathname==="/universes"||n.pathname.startsWith("/universe/")?"#000000":q,border:`1px solid ${q}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"UNIVERSE"}),e.jsx(CustomButton,{onClick:()=>t("/journal"),style:{background:n.pathname==="/journal"?q:"transparent",color:n.pathname==="/journal"?"#000000":q,border:`1px solid ${q}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"JOURNAL"}),e.jsx(CustomButton,{onClick:()=>t("/market"),style:{background:n.pathname==="/market"?q:"transparent",color:n.pathname==="/market"?"#000000":q,border:`1px solid ${q}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"MARKET"}),e.jsx(CustomButton,{onClick:()=>t("/"),style:{background:n.pathname==="/"||n.pathname.startsWith("/burn/")?q:"transparent",color:n.pathname==="/"||n.pathname.startsWith("/burn/")?"#000000":q,border:`1px solid ${q}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"BURNPAGE"})]}),e.jsxs("div",{style:{padding:"32px"},children:[e.jsxs("div",{style:{...We,display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:700,fontSize:18},children:[e.jsx("div",{children:"Total Equity: $100,000"}),e.jsx("div",{children:"Cash: $20,000"}),e.jsxs("div",{children:["Open P/L: ",e.jsx("span",{style:{color:q},children:"+$1,200"})]}),e.jsxs("div",{children:["% Allocated: ",e.jsx("span",{style:{border:`1px solid ${q}`,padding:"2px 12px",borderRadius:2},children:"80%"})]}),e.jsx("div",{children:"Exposure: Long 70% / Short 10%"})]}),e.jsxs("div",{style:{display:"flex",gap:32},children:[e.jsx("div",{style:{flex:2},children:e.jsxs("div",{style:{...We,minHeight:320},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsx("div",{style:{fontWeight:700,fontSize:17},children:"Positions"}),e.jsx("button",{style:{background:"none",color:q,border:`1px solid ${q}`,fontFamily:"Courier New",fontSize:15,padding:"4px 18px",borderRadius:2,cursor:"pointer"},children:"Add Position"}),e.jsx("button",{style:{background:"none",color:q,border:`1px solid ${q}`,fontFamily:"Courier New",fontSize:15,padding:"4px 18px",borderRadius:2,cursor:"pointer"},children:"Export .json"})]}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1.5px solid ${q}`},children:[e.jsx("th",{style:{textAlign:"left",padding:6},children:"Ticker"}),e.jsx("th",{style:{textAlign:"right",padding:6},children:"Buy"}),e.jsx("th",{style:{textAlign:"right",padding:6},children:"Current"}),e.jsx("th",{style:{textAlign:"right",padding:6},children:"% Return"}),e.jsx("th",{style:{textAlign:"right",padding:6},children:"$ Return"}),e.jsx("th",{style:{textAlign:"right",padding:6},children:"Size"}),e.jsx("th",{style:{textAlign:"right",padding:6},children:"Held"}),e.jsx("th",{style:{textAlign:"center",padding:6},children:"Status"}),e.jsx("th",{style:{textAlign:"center",padding:6},children:"Notes"}),e.jsx("th",{style:{textAlign:"center",padding:6},children:"Trade"})]})}),e.jsx("tbody",{children:[1,2,3].map(p=>e.jsxs("tr",{style:{borderBottom:"1px solid #222"},children:[e.jsx("td",{style:{padding:6},children:"AAPL"}),e.jsx("td",{style:{padding:6,textAlign:"right"},children:"$180.00"}),e.jsx("td",{style:{padding:6,textAlign:"right"},children:"$185.00"}),e.jsx("td",{style:{padding:6,textAlign:"right",color:q},children:"+2.8%"}),e.jsx("td",{style:{padding:6,textAlign:"right",color:q},children:"+$50"}),e.jsx("td",{style:{padding:6,textAlign:"right"},children:"$1,000"}),e.jsx("td",{style:{padding:6,textAlign:"right"},children:"3d"}),e.jsx("td",{style:{padding:6,textAlign:"center"},children:"Open"}),e.jsx("td",{style:{padding:6,textAlign:"center"},children:"üìù"}),e.jsx("td",{style:{padding:6,textAlign:"center"},children:e.jsx("button",{style:{background:"none",color:q,border:`1px solid ${q}`,fontFamily:"Courier New",fontSize:14,padding:"2px 10px",borderRadius:2,cursor:"pointer"},children:"Trade"})})]},p))})]})]})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:24},children:[e.jsxs("div",{style:{...We,minHeight:60,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",padding:0},children:[e.jsx("div",{style:{padding:16,borderBottom:a&&Array.isArray(a.items)&&a.items.length>0?"1px solid #222":"none"},children:e.jsx(hr,{value:r,onSelect:i})}),a&&Array.isArray(a.items)&&a.items.length>0&&e.jsx("div",{style:{maxHeight:220,overflowY:"auto",padding:0},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:`1.5px solid ${q}`},children:[e.jsx("th",{style:{textAlign:"left",padding:6,position:"sticky",top:0,background:"black",zIndex:1},children:"Symbol"}),e.jsx("th",{style:{textAlign:"right",padding:6,position:"sticky",top:0,background:"black",zIndex:1},children:"Latest"}),e.jsx("th",{style:{textAlign:"right",padding:6,position:"sticky",top:0,background:"black",zIndex:1},children:"% Change"})]})}),e.jsx("tbody",{children:a.items.map((p,l)=>{const{latest:c,change:x}=mr(p);return e.jsxs("tr",{style:{borderBottom:"1px solid #222"},children:[e.jsx("td",{style:{padding:6},children:p.symbol}),e.jsx("td",{style:{padding:6,textAlign:"right"},children:typeof c=="number"?`$${c.toFixed(2)}`:"--"}),e.jsx("td",{style:{padding:6,textAlign:"right",color:typeof x=="number"?x>=0?q:xr:"#888"},children:typeof x=="number"?`${x>=0?"+":""}${x.toFixed(2)}%`:"--"})]},p.symbol||l)})})]})})]}),e.jsx("div",{style:{...We,minHeight:180},children:e.jsx(fr,{})})]})]}),e.jsxs("div",{style:{...We,maxWidth:420,margin:"40px auto 0 auto",background:"#181818"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:16,marginBottom:8},children:"Quick Trade Panel"}),e.jsxs("div",{style:{display:"flex",gap:10,marginBottom:8},children:[e.jsx("input",{placeholder:"Symbol",style:{flex:1,background:"black",color:q,border:`1px solid ${q}`,borderRadius:2,padding:"4px 8px",fontFamily:"Courier New"}}),e.jsxs("select",{style:{background:"black",color:q,border:`1px solid ${q}`,borderRadius:2,padding:"4px 8px",fontFamily:"Courier New"},children:[e.jsx("option",{children:"Long"}),e.jsx("option",{children:"Short"})]}),e.jsx("input",{placeholder:"Amount",style:{width:80,background:"black",color:q,border:`1px solid ${q}`,borderRadius:2,padding:"4px 8px",fontFamily:"Courier New"}})]}),e.jsxs("div",{style:{display:"flex",gap:10,marginBottom:8},children:[e.jsx("input",{placeholder:"Stop-loss ($ or %)",style:{flex:1,background:"black",color:q,border:`1px solid ${q}`,borderRadius:2,padding:"4px 8px",fontFamily:"Courier New"}}),e.jsx("input",{placeholder:"Take-profit ($ or %)",style:{flex:1,background:"black",color:q,border:`1px solid ${q}`,borderRadius:2,padding:"4px 8px",fontFamily:"Courier New"}})]}),e.jsx("textarea",{placeholder:"Reason (optional)",style:{width:"100%",background:"black",color:q,border:`1px solid ${q}`,borderRadius:2,padding:"4px 8px",fontFamily:"Courier New",minHeight:40,marginBottom:8}}),e.jsx("button",{style:{width:"100%",background:q,color:"black",border:"none",borderRadius:2,fontFamily:"Courier New",fontWeight:700,fontSize:15,padding:"8px 0",cursor:"pointer"},children:"Submit Trade"})]})]})]})},R="rgb(140,185,162)",br=()=>{const{isInverted:t}=Ne(),n=$e(),r=Fe(),[i,a]=h.useState([]),{notification:s,notificationType:p,setNotification:l}=Re(),[c,x]=h.useState(!1),[d,u]=h.useState(new Set);h.useEffect(()=>{const b=localStorage.getItem("trade_journal_trades");if(b)try{a(JSON.parse(b))}catch(V){console.error("Error loading trades:",V)}},[]),h.useEffect(()=>{localStorage.setItem("trade_journal_trades",JSON.stringify(i))},[i]);const y=(b,V)=>{a(W=>W.map(M=>M.id===b?{...M,...V}:M))},T=b=>{a(V=>V.filter(W=>W.id!==b)),l("Trade deleted","success")},I=b=>new Date(b).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}),$=b=>{if(!b)return;const V=`https://elite.finviz.com/charts?t=${b.toUpperCase()}&p=d&l=1h1v`;window.open(V,"_blank")},v=(()=>{if(!i||i.length===0)return{totalTrades:0,winTrades:0,lossTrades:0,openTrades:0,winRate:0,averageReturn:0};const b=i.filter(S=>S.outcome&&S.outcome!=="Open"),V=b.filter(S=>S.outcome==="Win").length,W=b.filter(S=>S.outcome==="Loss").length,M=i.filter(S=>!S.outcome||S.outcome==="Open").length,B=b.length>0?V/b.length*100:0,X=b.reduce((S,z)=>{if(!z.entryPrice||!z.target)return S;const k=parseFloat(z.entryPrice),E=parseFloat(z.target);if(isNaN(k)||isNaN(E)||k<=0)return S;const G=(E-k)/k*100;return S+G},0),D=b.length>0?X/b.length:0;return{totalTrades:i.length,winTrades:V,lossTrades:W,openTrades:M,winRate:B,averageReturn:D}})(),F=()=>{x(!c),u(new Set)},H=b=>{u(V=>{const W=new Set(V);return W.has(b)?W.delete(b):W.add(b),W})},Y=()=>{d.size===i.length?u(new Set):u(new Set(i.map(b=>b.id)))},P=()=>{if(d.size===0){l("Please select at least one trade to delete","error");return}a(b=>b.filter(V=>!d.has(V.id))),u(new Set),l(`Deleted ${d.size} trades`,"success")},K=()=>{if(d.size===0){l("Please select at least one trade to create burnlist","error");return}const b=i.filter(S=>d.has(S.id)),V=JSON.parse(localStorage.getItem("burnlist_watchlists")||"{}"),W=`Journal_${new Date().toISOString().split("T")[0]}`,M=`journal_${Date.now()}`,B=W.toLowerCase().replace(/[^a-z0-9]/g,"-"),X={id:M,name:W,slug:B,items:b.map(S=>({symbol:S.ticker,buyPrice:parseFloat(S.entryPrice)||0,buyDate:S.executedAt||S.date||new Date().toISOString(),historicalData:[]})),reason:`Created from journal with ${b.length} trades`,createdAt:new Date().toISOString()},D={...V,[M]:X};localStorage.setItem("burnlist_watchlists",JSON.stringify(D)),l(`Created burnlist "${W}" with ${b.length} stocks`,"success"),u(new Set)};return e.jsxs("div",{style:{backgroundColor:t?"rgb(140,185,162)":"#000000",color:t?"#000000":"#ffffff",minHeight:"100vh",padding:"0",fontFamily:"'Courier New', monospace"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:`2px solid ${R}`,background:"rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:e.jsx("h1",{style:{color:R,margin:0,fontSize:"24px",fontWeight:"bold"},children:"TRADE JOURNAL"})}),e.jsxs("div",{style:{color:R,fontSize:"14px"},children:[i.length," Trades Logged"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",borderBottom:`1px solid ${R}`,background:"rgba(0,0,0,0.3)",gap:"10px",marginBottom:"20px"},children:[e.jsx(Z,{onClick:()=>n("/universes"),style:{background:r.pathname==="/universes"||r.pathname.startsWith("/universe/")?R:"transparent",color:r.pathname==="/universes"||r.pathname.startsWith("/universe/")?"#000000":R,border:`1px solid ${R}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"UNIVERSE"}),e.jsx(Z,{onClick:()=>n("/journal"),style:{background:r.pathname==="/journal"?R:"transparent",color:r.pathname==="/journal"?"#000000":R,border:`1px solid ${R}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"JOURNAL"}),e.jsx(Z,{onClick:()=>n("/market"),style:{background:r.pathname==="/market"?R:"transparent",color:r.pathname==="/market"?"#000000":R,border:`1px solid ${R}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"MARKET"}),e.jsx(Z,{onClick:()=>n("/"),style:{background:r.pathname==="/"||r.pathname.startsWith("/burn/")?R:"transparent",color:r.pathname==="/"||r.pathname.startsWith("/burn/")?"#000000":R,border:`1px solid ${R}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"BURNPAGE"})]}),v.totalTrades>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",padding:"12px 20px",background:"rgba(0,0,0,0.2)","@media (max-width: 768px)":{flexDirection:"column",gap:"8px",padding:"8px 16px"}},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:R,fontSize:"14px",fontWeight:"bold"},children:"TOTAL TRADES"}),e.jsx("div",{style:{color:R,fontSize:"18px",fontWeight:"bold"},children:v.totalTrades})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:R,fontSize:"14px",fontWeight:"bold"},children:"WINS"}),e.jsx("div",{style:{color:R,fontSize:"18px",fontWeight:"bold"},children:v.winTrades})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:R,fontSize:"14px",fontWeight:"bold"},children:"LOSSES"}),e.jsx("div",{style:{color:R,fontSize:"18px",fontWeight:"bold"},children:v.lossTrades})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:R,fontSize:"14px",fontWeight:"bold"},children:"OPEN"}),e.jsx("div",{style:{color:R,fontSize:"18px",fontWeight:"bold"},children:v.openTrades})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:R,fontSize:"14px",fontWeight:"bold"},children:"WIN RATE"}),e.jsxs("div",{style:{color:R,fontSize:"18px",fontWeight:"bold"},children:[v.winRate.toFixed(1),"%"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:R,fontSize:"14px",fontWeight:"bold"},children:"AVG RETURN"}),e.jsxs("div",{style:{color:R,fontSize:"18px",fontWeight:"bold"},children:[v.averageReturn.toFixed(1),"%"]})]})]}),s&&e.jsx(ve,{message:s,type:p,onClose:()=>l("")}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"10px"},children:e.jsx("button",{onClick:F,style:{background:"none",border:"none",color:R,fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",padding:"4px 8px",textDecoration:"underline"},children:c?"DONE":"EDIT"})}),i.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:R,fontSize:"18px"},children:[e.jsx("div",{style:{marginBottom:"20px"},children:"üìä No executed trades yet"}),e.jsx("div",{style:{fontSize:"14px",opacity:.7},children:"Execute trades from the Universe page to see them here"})]}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:`1px solid ${R}`,fontSize:"14px",tableLayout:"fixed",lineHeight:"24px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(140,185,162,0.1)",borderBottom:`2px solid ${R}`,height:"40px"},children:[c&&e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden",width:"40px"},children:e.jsx("input",{type:"checkbox",checked:d.size===i.length&&i.length>0,onChange:Y,style:{accentColor:R}})}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Ticker"}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Setup"}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"R:R"}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Verdict"}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Outcome"}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Entry"}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Stop"}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Target"}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Position"}),e.jsx("th",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Date"}),c&&e.jsx("th",{style:{padding:"0px",textAlign:"center",height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:"Actions"})]})}),e.jsx("tbody",{children:i.map((b,V)=>e.jsxs("tr",{style:{borderBottom:`1px solid ${R}`,background:V%2===0?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.1)",height:"40px"},children:[c&&e.jsx("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden",width:"40px"},children:e.jsx("input",{type:"checkbox",checked:d.has(b.id),onChange:()=>H(b.id),style:{accentColor:R}})}),e.jsx("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,fontWeight:"bold",height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:e.jsx("span",{onClick:()=>$(b.ticker),style:{cursor:"pointer",textDecoration:"underline",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},title:`Click to open ${b.ticker} chart in new tab`,children:b.ticker})}),e.jsx("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:b.setup||b.setupType||"Manual"}),e.jsx("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:b.riskReward?`${b.riskReward}:1`:"N/A"}),e.jsx("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",height:"24px",maxHeight:"24px"},children:[e.jsx("img",{src:b.verdictFlag||Be,alt:b.verdict,style:{width:"14px",height:"14px"}}),e.jsx("span",{style:{fontSize:"12px",lineHeight:"14px"},children:b.verdict||"Qualified"})]})}),e.jsx("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:e.jsxs("select",{value:b.outcome||"Open",onChange:W=>y(b.id,{outcome:W.target.value}),style:{background:"transparent",color:R,border:"none",padding:"2px 4px",fontFamily:"'Courier New', monospace",fontSize:"11px",cursor:"pointer",height:"35px",maxHeight:"35px",lineHeight:"31px"},children:[e.jsx("option",{value:"Open",children:"Open"}),e.jsx("option",{value:"Win",children:"Win"}),e.jsx("option",{value:"Loss",children:"Loss"}),e.jsx("option",{value:"Break Even",children:"Break Even"})]})}),e.jsxs("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:["$",b.entryPrice?b.entryPrice.toFixed(2):"N/A"]}),e.jsxs("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:["$",b.stopLoss?b.stopLoss.toFixed(2):"N/A"]}),e.jsxs("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:["$",b.target?b.target.toFixed(2):"N/A"]}),e.jsx("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:b.positionSize?`${b.positionSize} shares`:"N/A"}),e.jsx("td",{style:{padding:"0px",textAlign:"center",borderRight:`1px solid ${R}`,height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:b.executedAt?I(b.executedAt):I(b.date)}),c&&e.jsx("td",{style:{padding:"8px",textAlign:"center",height:"40px",minHeight:"40px",maxHeight:"40px",lineHeight:"24px",boxSizing:"border-box",verticalAlign:"middle",overflow:"hidden"},children:e.jsx(Z,{onClick:()=>T(b.id),style:{background:"none",border:"none",color:"#ff4444",padding:"2px 4px",fontSize:"10px",cursor:"pointer",height:"20px",maxHeight:"20px",lineHeight:"16px"},children:"DELETE"})})]},b.id))})]})})]}),c&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",borderBottom:`1px solid ${R}`,background:"rgba(0,0,0,0.2)",gap:"10px",marginBottom:"20px"},children:[e.jsx(Z,{onClick:Y,style:{background:d.size===i.length?R:"transparent",color:d.size===i.length?"#000000":R,border:`1px solid ${R}`,padding:"6px 12px",fontFamily:"'Courier New', monospace",fontSize:"10px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},children:d.size===i.length?"DESELECT ALL":"SELECT ALL"}),e.jsxs(Z,{onClick:P,disabled:d.size===0,style:{background:d.size===0?"rgba(0,0,0,0.3)":"transparent",color:d.size===0?"#666":"#e31507",border:`1px solid ${d.size===0?"#666":"#e31507"}`,padding:"6px 12px",fontFamily:"'Courier New', monospace",fontSize:"10px",fontWeight:"bold",cursor:d.size===0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:["DELETE (",d.size,")"]}),e.jsxs(Z,{onClick:K,disabled:d.size===0,style:{background:d.size===0?"rgba(0,0,0,0.3)":"transparent",color:d.size===0?"#666":R,border:`1px solid ${d.size===0?"#666":R}`,padding:"6px 12px",fontFamily:"'Courier New', monospace",fontSize:"10px",fontWeight:"bold",cursor:d.size===0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:["CREATE BURNLIST (",d.size,")"]})]})]})},wr=()=>{const[t,n]=h.useState(""),[r,i]=h.useState(null),[a,s]=h.useState(!1),[p,l]=h.useState(""),c=async()=>{s(!0),l(""),i(null);try{const x=await fetch(`http://localhost:3001/api/finviz-quote?ticker=${t.toUpperCase()}`);if(!x.ok)throw new Error("Failed to fetch");const d=await x.json();Array.isArray(d)&&d.length>0&&d[0].Close?i(d[0].Close):l("No price data found")}catch{l("Error fetching price")}s(!1)};return e.jsxs("div",{style:{maxWidth:400,margin:"60px auto",padding:24,background:"#111",color:"#C0FFC0",borderRadius:8,fontFamily:"monospace"},children:[e.jsx("h2",{style:{color:"#C0FFC0"},children:"Add Stock & Get Current Price"}),e.jsx("input",{type:"text",value:t,onChange:x=>n(x.target.value),placeholder:"Enter ticker (e.g. SPY)",style:{width:"100%",padding:8,fontSize:18,marginBottom:12,borderRadius:4,border:"1px solid #333",background:"#222",color:"#C0FFC0"}}),e.jsx("button",{onClick:c,disabled:a||!t,style:{width:"100%",padding:10,fontSize:18,background:"#C0FFC0",color:"#111",border:"none",borderRadius:4,cursor:"pointer",fontWeight:"bold"},children:a?"Loading...":"Get Price"}),r&&e.jsxs("div",{style:{marginTop:24,fontSize:22,color:"#C0FFC0"},children:["Current Price: ",e.jsx("span",{style:{fontWeight:"bold"},children:r})]}),p&&e.jsx("div",{style:{marginTop:16,color:"#FF5555"},children:p})]})},ke="rgb(140,185,162)",Sr=()=>{const t=$e(),n=Fe(),{isInverted:r,toggleTheme:i}=Ne(),a=J(ke),s=J("black"),p=J("#e31507"),{notification:l,notificationType:c,setNotification:x}=Re();return e.jsx("div",{style:{fontFamily:"Courier New",color:a,backgroundColor:s,minHeight:"100vh",padding:"0"},children:e.jsxs("div",{style:{padding:"32px","@media (max-width: 768px)":{padding:"16px",paddingBottom:"80px"},"@media (max-width: 480px)":{padding:"12px",paddingBottom:"80px"}},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24,flexWrap:"wrap",gap:"12px","@media (max-width: 768px)":{flexDirection:"column",alignItems:"flex-start",marginBottom:16}},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,"@media (max-width: 480px)":{gap:8}},children:[e.jsx("button",{onClick:i,style:{border:"none",background:"none",padding:0,cursor:"pointer",display:"flex",alignItems:"center",minHeight:"44px"},"aria-label":"Toggle theme",children:e.jsx("img",{src:r?Dt:At,alt:"Burnlist Logo",style:{width:40,height:40,marginRight:10,transition:"filter 0.3s","@media (max-width: 480px)":{width:32,height:32,marginRight:8}}})}),e.jsx("strong",{style:{fontSize:"170%",lineHeight:"40px",display:"inline-block",color:a,"@media (max-width: 768px)":{fontSize:"140%",lineHeight:"32px"},"@media (max-width: 480px)":{fontSize:"120%",lineHeight:"28px"}},children:"BURNLIST v1.1"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,"@media (max-width: 768px)":{alignSelf:"flex-end"}},children:[e.jsx("span",{style:{color:p,fontWeight:"bold",fontSize:12},children:"19"}),e.jsx("span",{style:{color:a,fontWeight:"bold",fontSize:12},children:"6"}),e.jsx("span",{style:{color:a},children:"ACCOUNT: local"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",borderBottom:`1px solid ${ke}`,background:"rgba(0,0,0,0.3)",gap:"10px",marginBottom:"20px"},children:[e.jsx(Z,{onClick:()=>t("/universes"),style:{background:n.pathname==="/universes"||n.pathname.startsWith("/universe/")?ke:"transparent",color:n.pathname==="/universes"||n.pathname.startsWith("/universe/")?"#000000":ke,border:`1px solid ${ke}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"UNIVERSE"}),e.jsx(Z,{onClick:()=>t("/journal"),style:{background:n.pathname==="/journal"?ke:"transparent",color:n.pathname==="/journal"?"#000000":ke,border:`1px solid ${ke}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"JOURNAL"}),e.jsx(Z,{onClick:()=>t("/market"),style:{background:n.pathname==="/market"?ke:"transparent",color:n.pathname==="/market"?"#000000":ke,border:`1px solid ${ke}`,padding:"9px 18px",fontFamily:"'Courier New', monospace",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px",textAlign:"center"},children:"MARKET"})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"50px",color:a},children:[e.jsx("h2",{style:{fontSize:"24px",marginBottom:"20px"},children:"MARKET DATA"}),e.jsx("p",{style:{fontSize:"16px",marginBottom:"30px"},children:"Market analysis and data will be displayed here."})]}),l&&e.jsx("div",{style:{position:"fixed",top:24,left:0,right:0,zIndex:10001,display:"flex",justifyContent:"center",pointerEvents:"none","@media (max-width: 768px)":{top:16}},children:e.jsx("div",{style:{minWidth:320,maxWidth:480,pointerEvents:"auto","@media (max-width: 768px)":{minWidth:280,maxWidth:"calc(100vw - 32px)"}},children:e.jsx(ve,{message:l,type:c,onClose:()=>x("")})})})]})})},vr="rgb(140,185,162)",kr=()=>{const t=Fe(),n=J(vr),r=J("black"),i=[{path:"/universes",label:"UNIVERSE"},{path:"/journal",label:"DASHBOARD"},{path:"/market",label:"MARKET"},{path:"/",label:"GRAPH VIEW"}];return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: ${r};
            border-top: 1px solid ${n};
            padding: 12px 16px;
            z-index: 1000;
            display: flex;
            justify-content: space-around;
            align-items: center;
            gap: 8px;
          }
          
          @media (min-width: 769px) {
            .mobile-nav {
              display: none !important;
            }
          }
          
          .mobile-nav-button {
            background: ${r};
            color: ${n};
            border: 1px solid ${n};
            padding: 8px 12px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            text-decoration: none;
            text-align: center;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
          }
          
          .mobile-nav-button:active {
            background: ${n};
            color: ${r};
          }
          
          @media (max-width: 480px) {
            .mobile-nav {
              padding: 8px 12px;
              gap: 6px;
            }
            .mobile-nav-button {
              font-size: 10px;
              padding: 6px 8px;
              letter-spacing: 0.3px;
            }
          }
        `}),e.jsx("div",{className:"mobile-nav",children:i.map(a=>{const s=t.pathname===a.path;return e.jsx(Ke,{to:a.path,className:"mobile-nav-button",style:{backgroundColor:s?n:r,color:s?r:n},children:a.label},a.path)})})]})};function jr(){const[t,n]=h.useState(()=>{try{const r=localStorage.getItem("burnlist_watchlists");return console.log("Loaded watchlists from localStorage:",r),r?JSON.parse(r):{}}catch{return{}}});return h.useEffect(()=>{console.log("Saving watchlists to localStorage:",t),localStorage.setItem("burnlist_watchlists",JSON.stringify(t))},[t]),h.useEffect(()=>()=>{fe.cleanup()},[]),e.jsx(gn,{children:e.jsxs(Vt,{children:[e.jsxs(Jt,{children:[e.jsx(Ae,{path:"/",element:e.jsx(jn,{watchlists:t,setWatchlists:n})}),e.jsx(Ae,{path:"/watchlist/:slug",element:e.jsx(Kn,{watchlists:t,setWatchlists:n})}),e.jsx(Ae,{path:"/mockwatchlist",element:e.jsx(Yn,{})}),e.jsx(Ae,{path:"/universes",element:e.jsx(gr,{})}),e.jsx(Ae,{path:"/universe/:slug",element:e.jsx(ur,{})}),e.jsx(Ae,{path:"/trade",element:e.jsx(yr,{})}),e.jsx(Ae,{path:"/journal",element:e.jsx(br,{})}),e.jsx(Ae,{path:"/add-stock-price",element:e.jsx(wr,{})}),e.jsx(Ae,{path:"/market",element:e.jsx(Sr,{})})]}),e.jsx(kr,{})]})})}console.log("MAIN.JSX is running");ln.createRoot(document.getElementById("root")).render(e.jsx(jr,{}));
